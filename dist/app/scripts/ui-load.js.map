{"version":3,"sources":["../../../server/app/scripts/ui-load.js"],"names":["uiLoad","$","$document","loaded","promise","deferred","Deferred","load","srcs","isArray","split","each","index","src","then","indexOf","loadCSS","loadScript","resolve","script","createElement","onload","e","onerror","reject","body","appendChild","href","style","rel","type","head","jQuery","document"],"mappings":";;AACA;;;;;;;AAOA,IAAIA,SAASA,UAAU,EAAvB;;AAEA,CAAC,UAASC,CAAT,EAAYC,SAAZ,EAAuBF,MAAvB,EAA+B;AAC/B;;AAEA,KAAIG,SAAS,EAAb;AAAA,KACAC,UAAU,KADV;AAAA,KAEAC,WAAWJ,EAAEK,QAAF,EAFX;;AAIA;;;;;AAKAN,QAAOO,IAAP,GAAc,UAAUC,IAAV,EAAgB;AAC7BA,SAAOP,EAAEQ,OAAF,CAAUD,IAAV,IAAkBA,IAAlB,GAAyBA,KAAKE,KAAL,CAAW,KAAX,CAAhC;AACA,MAAG,CAACN,OAAJ,EAAY;AACXA,aAAUC,SAASD,OAAT,EAAV;AACA;;AAEDH,IAAEU,IAAF,CAAOH,IAAP,EAAa,UAASI,KAAT,EAAgBC,GAAhB,EAAqB;AACjCT,aAAUA,QAAQU,IAAR,CAAc,YAAU;AACjC,WAAOD,IAAIE,OAAJ,CAAY,MAAZ,KAAsB,CAAtB,GAA0BC,QAAQH,GAAR,CAA1B,GAAyCI,WAAWJ,GAAX,CAAhD;AACA,IAFS,CAAV;AAGA,GAJD;AAKAR,WAASa,OAAT;AACA,SAAOd,OAAP;AACA,EAbD;;AAeA;;;;;AAKA,KAAIa,aAAa,SAAbA,UAAa,CAAUJ,GAAV,EAAe;AAC/B,MAAGV,OAAOU,GAAP,CAAH,EAAgB,OAAOV,OAAOU,GAAP,EAAYT,OAAZ,EAAP;;AAEhB,MAAIC,WAAWJ,EAAEK,QAAF,EAAf;AACA,MAAIa,SAASjB,UAAUkB,aAAV,CAAwB,QAAxB,CAAb;AACAD,SAAON,GAAP,GAAaA,GAAb;AACAM,SAAOE,MAAP,GAAgB,UAAUC,CAAV,EAAa;AAC5BjB,YAASa,OAAT,CAAiBI,CAAjB;AACA,GAFD;AAGAH,SAAOI,OAAP,GAAiB,UAAUD,CAAV,EAAa;AAC7BjB,YAASmB,MAAT,CAAgBF,CAAhB;AACA,GAFD;AAGApB,YAAUuB,IAAV,CAAeC,WAAf,CAA2BP,MAA3B;AACAhB,SAAOU,GAAP,IAAcR,QAAd;;AAEA,SAAOA,SAASD,OAAT,EAAP;AACA,EAhBD;;AAkBA;;;;;AAKA,KAAIY,UAAU,SAAVA,OAAU,CAAUW,IAAV,EAAgB;AAC7B,MAAGxB,OAAOwB,IAAP,CAAH,EAAiB,OAAOxB,OAAOwB,IAAP,EAAavB,OAAb,EAAP;;AAEjB,MAAIC,WAAWJ,EAAEK,QAAF,EAAf;AACA,MAAIsB,QAAQ1B,UAAUkB,aAAV,CAAwB,MAAxB,CAAZ;AACAQ,QAAMC,GAAN,GAAY,YAAZ;AACAD,QAAME,IAAN,GAAa,UAAb;AACAF,QAAMD,IAAN,GAAaA,IAAb;AACAC,QAAMP,MAAN,GAAe,UAAUC,CAAV,EAAa;AAC3BjB,YAASa,OAAT,CAAiBI,CAAjB;AACA,GAFD;AAGAM,QAAML,OAAN,GAAgB,UAAUD,CAAV,EAAa;AAC5BjB,YAASmB,MAAT,CAAgBF,CAAhB;AACA,GAFD;AAGApB,YAAU6B,IAAV,CAAeL,WAAf,CAA2BE,KAA3B;AACAzB,SAAOwB,IAAP,IAAetB,QAAf;;AAEA,SAAOA,SAASD,OAAT,EAAP;AACA,EAlBD;AAoBA,CA3ED,EA2EG4B,MA3EH,EA2EWC,QA3EX,EA2EqBjC,MA3ErB","file":"ui-load.js","sourcesContent":["\r\n/**\r\n * 0.1.0\r\n * Deferred load js/css file, used for ui-jq.js and Lazy Loading.\r\n * \r\n * @ flatfull.com All Rights Reserved.\r\n * Author url: http://themeforest.net/user/flatfull\r\n */\r\nvar uiLoad = uiLoad || {};\r\n\r\n(function($, $document, uiLoad) {\r\n\t\"use strict\";\r\n\r\n\tvar loaded = [],\r\n\tpromise = false,\r\n\tdeferred = $.Deferred();\r\n\r\n\t/**\r\n\t * Chain loads the given sources\r\n\t * @param srcs array, script or css\r\n\t * @returns {*} Promise that will be resolved once the sources has been loaded.\r\n\t */\r\n\tuiLoad.load = function (srcs) {\r\n\t\tsrcs = $.isArray(srcs) ? srcs : srcs.split(/\\s+/);\r\n\t\tif(!promise){\r\n\t\t\tpromise = deferred.promise();\r\n\t\t}\r\n\r\n\t\t$.each(srcs, function(index, src) {\r\n\t\t\tpromise = promise.then( function(){\r\n\t\t\t\treturn src.indexOf('.css') >=0 ? loadCSS(src) : loadScript(src);\r\n\t\t\t} );\r\n\t\t});\r\n\t\tdeferred.resolve();\r\n\t\treturn promise;\r\n\t};\r\n\r\n\t/**\r\n\t * Dynamically loads the given script\r\n\t * @param src The url of the script to load dynamically\r\n\t * @returns {*} Promise that will be resolved once the script has been loaded.\r\n\t */\r\n\tvar loadScript = function (src) {\r\n\t\tif(loaded[src]) return loaded[src].promise();\r\n\r\n\t\tvar deferred = $.Deferred();\r\n\t\tvar script = $document.createElement('script');\r\n\t\tscript.src = src;\r\n\t\tscript.onload = function (e) {\r\n\t\t\tdeferred.resolve(e);\r\n\t\t};\r\n\t\tscript.onerror = function (e) {\r\n\t\t\tdeferred.reject(e);\r\n\t\t};\r\n\t\t$document.body.appendChild(script);\r\n\t\tloaded[src] = deferred;\r\n\r\n\t\treturn deferred.promise();\r\n\t};\r\n\r\n\t/**\r\n\t * Dynamically loads the given CSS file\r\n\t * @param href The url of the CSS to load dynamically\r\n\t * @returns {*} Promise that will be resolved once the CSS file has been loaded.\r\n\t */\r\n\tvar loadCSS = function (href) {\r\n\t\tif(loaded[href]) return loaded[href].promise();\r\n\r\n\t\tvar deferred = $.Deferred();\r\n\t\tvar style = $document.createElement('link');\r\n\t\tstyle.rel = 'stylesheet';\r\n\t\tstyle.type = 'text/css';\r\n\t\tstyle.href = href;\r\n\t\tstyle.onload = function (e) {\r\n\t\t\tdeferred.resolve(e);\r\n\t\t};\r\n\t\tstyle.onerror = function (e) {\r\n\t\t\tdeferred.reject(e);\r\n\t\t};\r\n\t\t$document.head.appendChild(style);\r\n\t\tloaded[href] = deferred;\r\n\r\n\t\treturn deferred.promise();\r\n\t}\r\n\r\n})(jQuery, document, uiLoad);\r\n"]}