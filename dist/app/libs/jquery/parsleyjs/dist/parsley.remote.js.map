{"version":3,"sources":["../../../../../../server/app/libs/jquery/parsleyjs/dist/parsley.remote.js"],"names":["factory","define","amd","exports","module","require","jQuery","$","window","globalID","pastWarnings","ParsleyUtils","attr","$element","namespace","obj","attribute","attributes","regex","RegExp","i","hasOwnProperty","length","specified","test","name","camelize","slice","deserializeValue","value","checkAttr","is","setAttr","setAttribute","dasherize","String","generateID","num","isNaN","Number","parseJSON","e","str","replace","match","chr","toUpperCase","toLowerCase","warn","console","apply","arguments","warnOnce","msg","_resetWarnings","objectCreate","Object","create","prototype","Error","TypeError","result","ParsleyDefaults","inputs","excluded","priorityEnabled","multiple","group","uiEnabled","validationThreshold","focus","trigger","errorClass","successClass","classHandler","ParsleyField","errorsContainer","errorsWrapper","errorTemplate","ParsleyAbstract","asyncSupport","actualizeOptions","options","domOptions","parent","_resetOptions","initOptions","validateThroughValidator","constraints","priority","ParsleyValidator","validate","_listeners","on","fn","queue","push","subscribe","listenTo","off","splice","unsubscribe","unsubscribeTo","target","parentResult","call","reset","__class__","_trigger","fields","destroy","removeData","_findRelatedMultiple","find","Validator","__version__","bindingKey","constructor","objectOrString","AssertsOrConstraintOrGroup","_isArray","_validateString","isBinded","_validateBindedObject","_validateObject","bind","object","constraint","Constraint","unbind","_validatorjsConstraint","getBinded","string","assert","failures","Assert","check","Violation","errorCode","must_be_a_string","must_be_an_array","must_be_a_number","must_be_a_string_or_array","data","nodes","_bootstrap","err","property","isRequired","get","requiresValidation","has","strict","undefined","HaveProperty","_check","_isEmptyObject","violation","add","node","placeholder","remove","_nodes","_checkAsserts","asserts","show","__toString","getViolation","expected","__parentClass__","groups","addGroup","construct","hasGroup","hasGroups","hasOneOf","indexOf","addGroups","removeGroup","_groups","Blank","Callback","Array","concat","Choice","list","choices","Collection","assertOrConstraint","collection","validator","count","Count","array","Email","regExp","EqualTo","reference","GreaterThan","threshold","GreaterThanOrEqual","InstanceOf","classRef","Length","boundaries","min","max","LessThan","LessThanOrEqual","NotNull","NotBlank","Null","Range","Regexp","regexp","flag","Required","Unique","key","store","searchElement","t","len","n","Infinity","Math","floor","abs","k","toString","validatorjs_ns","validators","catalog","locale","init","extend","addValidator","requirementsTransformer","Parsley","setLocale","addCatalog","messages","set","addMessage","message","_setValidator","updateValidator","removeValidator","requirements","getErrorMessage","typeMessages","formatMessage","defaultMessage","en","parameters","notblank","required","type","pattern","flags","minlength","parseInt","maxlength","mincheck","maxcheck","range","equalto","val","ParsleyUI","listen","that","setupForm","setupField","reflow","fieldInstance","_ui","active","diff","_diff","validationResult","lastValidationResult","validatedOnce","manageStatusClass","manageErrorsMessages","actualizeTriggers","kept","added","failedOnce","manageFailingFieldTrigger","getErrorsMessages","_getErrorMessage","hasConstraints","needsValidation","_successClass","_errorClass","_resetClass","errorsMessagesDisabled","errorMessage","_insertErrorWrapper","$errorsWrapper","append","addClass","html","removeClass","removed","removeError","addError","updateError","doNotUpdateClass","formInstance","_focusedField","field","noFocus","customConstraintErrorMessage","newResult","oldResult","deep","found","j","proxy","onSubmitValidate","__id__","$errorClassHandler","_manageClassHandler","errorsWrapperId","validationInformationVisible","$handler","$errorsContainer","$from","after","$toBind","triggers","split","join","eventValidate","event","getValue","each","parsley","parsleyInstance","children","ParsleyForm","element","Event","stopImmediatePropagation","preventDefault","force","submitEvent","fieldValidationResult","_refreshFields","_withoutReactualizingFormOptions","_isFieldInGroup","isValid","isArray","inArray","_bindFields","self","oldFields","fieldsMappedById","not","Factory","oldActualizeOptions","eventName","ConstraintFactory","parsleyField","isDomConstraint","getPriority","parsleyFormInstance","constraintsByName","_bindConstraints","_isRequired","validateIfEmpty","refreshConstraints","priorities","_getConstraintsSortedPriorities","_handleWhitespace","addConstraint","removeConstraint","updateConstraint","_bindHtml5Constraints","hasClass","parseFloat","trimValue","whitespace","sort","a","b","ParsleyMultiple","addElement","$elements","fieldConstraints","filter","values","_init","ParsleyFactory","savedparsleyFormInstance","isMultiple","handleMultiple","parsleyMultipleInstance","$previouslyRelated","doNotStore","ParsleyExtend","o","deprecated","adapt","context","parsleyAdaptedCallback","args","unshift","eventPrefix","lastIndexOf","substr","callback","instance","unsubscribeAll","emit","instanceGiven","ParsleyConfig","i18n","email","url","number","integer","digits","alphanum","document","version","psly","instances","autoBind","asyncValidators","xhr","state","reverse","addAsyncValidator","asyncValidate","_asyncValidateForm","_asyncValidateField","asyncIsValid","_asyncIsValidField","_asyncIsValidForm","done","isDefaultPrevented","promises","when","fail","always","deferred","Deferred","remoteConstraintIndex","rejectWith","remote","_remote","resolveWith","promise","ajaxOptions","csr","remoteValidator","remoteReverse","remoteOptions","param","_remoteCache","_xhr","abort","ajax","textStatus","_handleRemoteResult","status"],"mappings":"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","file":"parsley.remote.js","sourcesContent":["/*!\r\n* Parsleyjs\r\n* Guillaume Potier - <guillaume@wisembly.com>\r\n* Version 2.1.3 - built Wed Jul 29 2015 08:27:00\r\n* MIT Licensed\r\n*\r\n*/\r\n!(function (factory) {\r\n  if (typeof define === 'function' && define.amd) {\r\n    // AMD. Register as an anonymous module depending on jQuery.\r\n    define(['jquery'], factory);\r\n  } else if (typeof exports === 'object') {\r\n    // Node/CommonJS\r\n    module.exports = factory(require('jquery'));\r\n  } else {\r\n    // Register plugin with global jQuery object.\r\n    factory(jQuery);\r\n  }\r\n}(function ($) {\r\n  // small hack for requirejs if jquery is loaded through map and not path\r\n  // see http://requirejs.org/docs/jquery.html\r\n  if ('undefined' === typeof $ && 'undefined' !== typeof window.jQuery)\r\n    $ = window.jQuery;\r\n  var globalID = 1,\r\n    pastWarnings = {};\r\n  var ParsleyUtils = {\r\n    // Parsley DOM-API\r\n    // returns object from dom attributes and values\r\n    attr: function ($element, namespace, obj) {\r\n      var\r\n        attribute, attributes,\r\n        regex = new RegExp('^' + namespace, 'i');\r\n      if ('undefined' === typeof obj)\r\n        obj = {};\r\n      else {\r\n        // Clear all own properties. This won't affect prototype's values\r\n        for (var i in obj) {\r\n          if (obj.hasOwnProperty(i))\r\n            delete obj[i];\r\n        }\r\n      }\r\n      if ('undefined' === typeof $element || 'undefined' === typeof $element[0])\r\n        return obj;\r\n      attributes = $element[0].attributes;\r\n      for (var i = attributes.length; i--; ) {\r\n        attribute = attributes[i];\r\n        if (attribute && attribute.specified && regex.test(attribute.name)) {\r\n          obj[this.camelize(attribute.name.slice(namespace.length))] = this.deserializeValue(attribute.value);\r\n        }\r\n      }\r\n      return obj;\r\n    },\r\n    checkAttr: function ($element, namespace, checkAttr) {\r\n      return $element.is('[' + namespace + checkAttr + ']');\r\n    },\r\n    setAttr: function ($element, namespace, attr, value) {\r\n      $element[0].setAttribute(this.dasherize(namespace + attr), String(value));\r\n    },\r\n    generateID: function () {\r\n      return '' + globalID++;\r\n    },\r\n    /** Third party functions **/\r\n    // Zepto deserialize function\r\n    deserializeValue: function (value) {\r\n      var num;\r\n      try {\r\n        return value ?\r\n          value == \"true\" ||\r\n          (value == \"false\" ? false :\r\n          value == \"null\" ? null :\r\n          !isNaN(num = Number(value)) ? num :\r\n          /^[\\[\\{]/.test(value) ? $.parseJSON(value) :\r\n          value)\r\n          : value;\r\n      } catch (e) { return value; }\r\n    },\r\n    // Zepto camelize function\r\n    camelize: function (str) {\r\n      return str.replace(/-+(.)?/g, function (match, chr) {\r\n        return chr ? chr.toUpperCase() : '';\r\n      });\r\n    },\r\n    // Zepto dasherize function\r\n    dasherize: function (str) {\r\n      return str.replace(/::/g, '/')\r\n        .replace(/([A-Z]+)([A-Z][a-z])/g, '$1_$2')\r\n        .replace(/([a-z\\d])([A-Z])/g, '$1_$2')\r\n        .replace(/_/g, '-')\r\n        .toLowerCase();\r\n    },\r\n    warn: function() {\r\n      if (window.console && 'function' === typeof window.console.warn)\r\n        window.console.warn.apply(window.console, arguments);\r\n    },\r\n    warnOnce: function(msg) {\r\n      if (!pastWarnings[msg]) {\r\n        pastWarnings[msg] = true;\r\n        this.warn.apply(this, arguments);\r\n      }\r\n    },\r\n    _resetWarnings: function() {\r\n      pastWarnings = {};\r\n    },\r\n    // Object.create polyfill, see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/create#Polyfill\r\n    objectCreate: Object.create || (function () {\r\n      var Object = function () {};\r\n      return function (prototype) {\r\n        if (arguments.length > 1) {\r\n          throw Error('Second argument not supported');\r\n        }\r\n        if (typeof prototype != 'object') {\r\n          throw TypeError('Argument must be an object');\r\n        }\r\n        Object.prototype = prototype;\r\n        var result = new Object();\r\n        Object.prototype = null;\r\n        return result;\r\n      };\r\n    })()\r\n  };\r\n// All these options could be overriden and specified directly in DOM using\r\n// `data-parsley-` default DOM-API\r\n// eg: `inputs` can be set in DOM using `data-parsley-inputs=\"input, textarea\"`\r\n// eg: `data-parsley-stop-on-first-failing-constraint=\"false\"`\r\n\r\n  var ParsleyDefaults = {\r\n    // ### General\r\n    // Default data-namespace for DOM API\r\n    namespace: 'data-parsley-',\r\n    // Supported inputs by default\r\n    inputs: 'input, textarea, select',\r\n    // Excluded inputs by default\r\n    excluded: 'input[type=button], input[type=submit], input[type=reset], input[type=hidden]',\r\n    // Stop validating field on highest priority failing constraint\r\n    priorityEnabled: true,\r\n    // ### Field only\r\n    // identifier used to group together inputs (e.g. radio buttons...)\r\n    multiple: null,\r\n    // identifier (or array of identifiers) used to validate only a select group of inputs\r\n    group: null,\r\n    // ### UI\r\n    // Enable\\Disable error messages\r\n    uiEnabled: true,\r\n    // Key events threshold before validation\r\n    validationThreshold: 3,\r\n    // Focused field on form validation error. 'first'|'last'|'none'\r\n    focus: 'first',\r\n    // `$.Event()` that will trigger validation. eg: `keyup`, `change`...\r\n    trigger: false,\r\n    // Class that would be added on every failing validation Parsley field\r\n    errorClass: 'parsley-error',\r\n    // Same for success validation\r\n    successClass: 'parsley-success',\r\n    // Return the `$element` that will receive these above success or error classes\r\n    // Could also be (and given directly from DOM) a valid selector like `'#div'`\r\n    classHandler: function (ParsleyField) {},\r\n    // Return the `$element` where errors will be appended\r\n    // Could also be (and given directly from DOM) a valid selector like `'#div'`\r\n    errorsContainer: function (ParsleyField) {},\r\n    // ul elem that would receive errors' list\r\n    errorsWrapper: '<ul class=\"parsley-errors-list\"></ul>',\r\n    // li elem that would receive error message\r\n    errorTemplate: '<li></li>'\r\n  };\r\n\r\n  var ParsleyAbstract = function () {};\r\n  ParsleyAbstract.prototype = {\r\n    asyncSupport: false,\r\n    actualizeOptions: function () {\r\n      ParsleyUtils.attr(this.$element, this.options.namespace, this.domOptions);\r\n      if (this.parent && this.parent.actualizeOptions)\r\n        this.parent.actualizeOptions();\r\n      return this;\r\n    },\r\n    _resetOptions: function (initOptions) {\r\n      this.domOptions = ParsleyUtils.objectCreate(this.parent.options);\r\n      this.options = ParsleyUtils.objectCreate(this.domOptions);\r\n      // Shallow copy of ownProperties of initOptions:\r\n      for (var i in initOptions) {\r\n        if (initOptions.hasOwnProperty(i))\r\n          this.options[i] = initOptions[i];\r\n      }\r\n      this.actualizeOptions();\r\n    },\r\n    // ParsleyValidator validate proxy function . Could be replaced by third party scripts\r\n    validateThroughValidator: function (value, constraints, priority) {\r\n      return window.ParsleyValidator.validate(value, constraints, priority);\r\n    },\r\n    _listeners: null,\r\n    // Register a callback for the given event name.\r\n    // Callback is called with context as the first argument and the `this`.\r\n    // The context is the current parsley instance, or window.Parsley if global.\r\n    // A return value of `false` will interrupt the calls\r\n    on: function (name, fn) {\r\n      this._listeners = this._listeners || {};\r\n      var queue = this._listeners[name] = this._listeners[name] || [];\r\n      queue.push(fn);\r\n      return this;\r\n    },\r\n    // Deprecated. Use `on` instead.\r\n    subscribe: function(name, fn) {\r\n      $.listenTo(this, name.toLowerCase(), fn);\r\n    },\r\n    // Unregister a callback (or all if none is given) for the given event name\r\n    off: function (name, fn) {\r\n      var queue = this._listeners && this._listeners[name];\r\n      if (queue) {\r\n        if (!fn) {\r\n          delete this._listeners[name];\r\n        } else {\r\n          for(var i = queue.length; i--; )\r\n            if (queue[i] === fn)\r\n              queue.splice(i, 1);\r\n        }\r\n      }\r\n      return this;\r\n    },\r\n    // Deprecated. Use `off`\r\n    unsubscribe: function(name, fn) {\r\n      $.unsubscribeTo(this, name.toLowerCase());\r\n    },\r\n    // Trigger an event of the given name.\r\n    // A return value of `false` interrupts the callback chain.\r\n    // Returns false if execution was interrupted.\r\n    trigger: function (name, target) {\r\n      target = target || this;\r\n      var queue = this._listeners && this._listeners[name];\r\n      var result, parentResult;\r\n      if (queue) {\r\n        for(var i = queue.length; i--; ) {\r\n          result = queue[i].call(target, target);\r\n          if (result === false) return result;\r\n        }\r\n      }\r\n      if (this.parent) {\r\n        return this.parent.trigger(name, target);\r\n      }\r\n      return true;\r\n    },\r\n    // Reset UI\r\n    reset: function () {\r\n      // Field case: just emit a reset event for UI\r\n      if ('ParsleyForm' !== this.__class__)\r\n        return this._trigger('reset');\r\n      // Form case: emit a reset event for each field\r\n      for (var i = 0; i < this.fields.length; i++)\r\n        this.fields[i]._trigger('reset');\r\n      this._trigger('reset');\r\n    },\r\n    // Destroy Parsley instance (+ UI)\r\n    destroy: function () {\r\n      // Field case: emit destroy event to clean UI and then destroy stored instance\r\n      if ('ParsleyForm' !== this.__class__) {\r\n        this.$element.removeData('Parsley');\r\n        this.$element.removeData('ParsleyFieldMultiple');\r\n        this._trigger('destroy');\r\n        return;\r\n      }\r\n      // Form case: destroy all its fields and then destroy stored instance\r\n      for (var i = 0; i < this.fields.length; i++)\r\n        this.fields[i].destroy();\r\n      this.$element.removeData('Parsley');\r\n      this._trigger('destroy');\r\n    },\r\n    _findRelatedMultiple: function() {\r\n      return this.parent.$element.find('[' + this.options.namespace + 'multiple=\"' + this.options.multiple +'\"]');\r\n    }\r\n  };\r\n/*!\r\n* validator.js\r\n* Guillaume Potier - <guillaume@wisembly.com>\r\n* Version 1.0.1 - built Mon Aug 25 2014 16:10:10\r\n* MIT Licensed\r\n*\r\n*/\r\nvar Validator = ( function ( ) {\r\n  var exports = {};\r\n  /**\r\n  * Validator\r\n  */\r\n  var Validator = function ( options ) {\r\n    this.__class__ = 'Validator';\r\n    this.__version__ = '1.0.1';\r\n    this.options = options || {};\r\n    this.bindingKey = this.options.bindingKey || '_validatorjsConstraint';\r\n  };\r\n  Validator.prototype = {\r\n    constructor: Validator,\r\n    /*\r\n    * Validate string: validate( string, Assert, string ) || validate( string, [ Assert, Assert ], [ string, string ] )\r\n    * Validate object: validate( object, Constraint, string ) || validate( object, Constraint, [ string, string ] )\r\n    * Validate binded object: validate( object, string ) || validate( object, [ string, string ] )\r\n    */\r\n    validate: function ( objectOrString, AssertsOrConstraintOrGroup, group ) {\r\n      if ( 'string' !== typeof objectOrString && 'object' !== typeof objectOrString )\r\n        throw new Error( 'You must validate an object or a string' );\r\n      // string / array validation\r\n      if ( 'string' === typeof objectOrString || _isArray(objectOrString) )\r\n        return this._validateString( objectOrString, AssertsOrConstraintOrGroup, group );\r\n      // binded object validation\r\n      if ( this.isBinded( objectOrString ) )\r\n        return this._validateBindedObject( objectOrString, AssertsOrConstraintOrGroup );\r\n      // regular object validation\r\n      return this._validateObject( objectOrString, AssertsOrConstraintOrGroup, group );\r\n    },\r\n    bind: function ( object, constraint ) {\r\n      if ( 'object' !== typeof object )\r\n        throw new Error( 'Must bind a Constraint to an object' );\r\n      object[ this.bindingKey ] = new Constraint( constraint );\r\n      return this;\r\n    },\r\n    unbind: function ( object ) {\r\n      if ( 'undefined' === typeof object._validatorjsConstraint )\r\n        return this;\r\n      delete object[ this.bindingKey ];\r\n      return this;\r\n    },\r\n    isBinded: function ( object ) {\r\n      return 'undefined' !== typeof object[ this.bindingKey ];\r\n    },\r\n    getBinded: function ( object ) {\r\n      return this.isBinded( object ) ? object[ this.bindingKey ] : null;\r\n    },\r\n    _validateString: function ( string, assert, group ) {\r\n      var result, failures = [];\r\n      if ( !_isArray( assert ) )\r\n        assert = [ assert ];\r\n      for ( var i = 0; i < assert.length; i++ ) {\r\n        if ( ! ( assert[ i ] instanceof Assert) )\r\n          throw new Error( 'You must give an Assert or an Asserts array to validate a string' );\r\n        result = assert[ i ].check( string, group );\r\n        if ( result instanceof Violation )\r\n          failures.push( result );\r\n      }\r\n      return failures.length ? failures : true;\r\n    },\r\n    _validateObject: function ( object, constraint, group ) {\r\n      if ( 'object' !== typeof constraint )\r\n        throw new Error( 'You must give a constraint to validate an object' );\r\n      if ( constraint instanceof Constraint )\r\n        return constraint.check( object, group );\r\n      return new Constraint( constraint ).check( object, group );\r\n    },\r\n    _validateBindedObject: function ( object, group ) {\r\n      return object[ this.bindingKey ].check( object, group );\r\n    }\r\n  };\r\n  Validator.errorCode = {\r\n    must_be_a_string: 'must_be_a_string',\r\n    must_be_an_array: 'must_be_an_array',\r\n    must_be_a_number: 'must_be_a_number',\r\n    must_be_a_string_or_array: 'must_be_a_string_or_array'\r\n  };\r\n  /**\r\n  * Constraint\r\n  */\r\n  var Constraint = function ( data, options ) {\r\n    this.__class__ = 'Constraint';\r\n    this.options = options || {};\r\n    this.nodes = {};\r\n    if ( data ) {\r\n      try {\r\n        this._bootstrap( data );\r\n      } catch ( err ) {\r\n        throw new Error( 'Should give a valid mapping object to Constraint', err, data );\r\n      }\r\n    }\r\n  };\r\n  Constraint.prototype = {\r\n    constructor: Constraint,\r\n    check: function ( object, group ) {\r\n      var result, failures = {};\r\n      // check all constraint nodes.\r\n      for ( var property in this.nodes ) {\r\n        var isRequired = false;\r\n        var constraint = this.get(property);\r\n        var constraints = _isArray( constraint ) ? constraint : [constraint];\r\n        for (var i = constraints.length - 1; i >= 0; i--) {\r\n          if ( 'Required' === constraints[i].__class__ ) {\r\n            isRequired = constraints[i].requiresValidation( group );\r\n            continue;\r\n          }\r\n        }\r\n        if ( ! this.has( property, object ) && ! this.options.strict && ! isRequired ) {\r\n          continue;\r\n        }\r\n        try {\r\n          if (! this.has( property, this.options.strict || isRequired ? object : undefined ) ) {\r\n            // we trigger here a HaveProperty Assert violation to have uniform Violation object in the end\r\n            new Assert().HaveProperty( property ).validate( object );\r\n          }\r\n          result = this._check( property, object[ property ], group );\r\n          // check returned an array of Violations or an object mapping Violations\r\n          if ( ( _isArray( result ) && result.length > 0 ) || ( !_isArray( result ) && !_isEmptyObject( result ) ) ) {\r\n            failures[ property ] = result;\r\n          }\r\n        } catch ( violation ) {\r\n          failures[ property ] = violation;\r\n        }\r\n      }\r\n      return _isEmptyObject(failures) ? true : failures;\r\n    },\r\n    add: function ( node, object ) {\r\n      if ( object instanceof Assert  || ( _isArray( object ) && object[ 0 ] instanceof Assert ) ) {\r\n        this.nodes[ node ] = object;\r\n        return this;\r\n      }\r\n      if ( 'object' === typeof object && !_isArray( object ) ) {\r\n        this.nodes[ node ] = object instanceof Constraint ? object : new Constraint( object );\r\n        return this;\r\n      }\r\n      throw new Error( 'Should give an Assert, an Asserts array, a Constraint', object );\r\n    },\r\n    has: function ( node, nodes ) {\r\n      nodes = 'undefined' !== typeof nodes ? nodes : this.nodes;\r\n      return 'undefined' !== typeof nodes[ node ];\r\n    },\r\n    get: function ( node, placeholder ) {\r\n      return this.has( node ) ? this.nodes[ node ] : placeholder || null;\r\n    },\r\n    remove: function ( node ) {\r\n      var _nodes = [];\r\n      for ( var i in this.nodes )\r\n        if ( i !== node )\r\n          _nodes[ i ] = this.nodes[ i ];\r\n      this.nodes = _nodes;\r\n      return this;\r\n    },\r\n    _bootstrap: function ( data ) {\r\n      if ( data instanceof Constraint )\r\n        return this.nodes = data.nodes;\r\n      for ( var node in data )\r\n        this.add( node, data[ node ] );\r\n    },\r\n    _check: function ( node, value, group ) {\r\n      // Assert\r\n      if ( this.nodes[ node ] instanceof Assert )\r\n        return this._checkAsserts( value, [ this.nodes[ node ] ], group );\r\n      // Asserts\r\n      if ( _isArray( this.nodes[ node ] ) )\r\n        return this._checkAsserts( value, this.nodes[ node ], group );\r\n      // Constraint -> check api\r\n      if ( this.nodes[ node ] instanceof Constraint )\r\n        return this.nodes[ node ].check( value, group );\r\n      throw new Error( 'Invalid node', this.nodes[ node ] );\r\n    },\r\n    _checkAsserts: function ( value, asserts, group ) {\r\n      var result, failures = [];\r\n      for ( var i = 0; i < asserts.length; i++ ) {\r\n        result = asserts[ i ].check( value, group );\r\n        if ( 'undefined' !== typeof result && true !== result )\r\n          failures.push( result );\r\n        // Some asserts (Collection for example) could return an object\r\n        // if ( result && ! ( result instanceof Violation ) )\r\n        //   return result;\r\n        //\r\n        // // Vast assert majority return Violation\r\n        // if ( result instanceof Violation )\r\n        //   failures.push( result );\r\n      }\r\n      return failures;\r\n    }\r\n  };\r\n  /**\r\n  * Violation\r\n  */\r\n  var Violation = function ( assert, value, violation ) {\r\n    this.__class__ = 'Violation';\r\n    if ( ! ( assert instanceof Assert ) )\r\n      throw new Error( 'Should give an assertion implementing the Assert interface' );\r\n    this.assert = assert;\r\n    this.value = value;\r\n    if ( 'undefined' !== typeof violation )\r\n      this.violation = violation;\r\n  };\r\n  Violation.prototype = {\r\n    show: function () {\r\n      var show =  {\r\n        assert: this.assert.__class__,\r\n        value: this.value\r\n      };\r\n      if ( this.violation )\r\n        show.violation = this.violation;\r\n      return show;\r\n    },\r\n    __toString: function () {\r\n      if ( 'undefined' !== typeof this.violation )\r\n        this.violation = '\", ' + this.getViolation().constraint + ' expected was ' + this.getViolation().expected;\r\n      return this.assert.__class__ + ' assert failed for \"' + this.value + this.violation || '';\r\n    },\r\n    getViolation: function () {\r\n      var constraint, expected;\r\n      for ( constraint in this.violation )\r\n        expected = this.violation[ constraint ];\r\n      return { constraint: constraint, expected: expected };\r\n    }\r\n  };\r\n  /**\r\n  * Assert\r\n  */\r\n  var Assert = function ( group ) {\r\n    this.__class__ = 'Assert';\r\n    this.__parentClass__ = this.__class__;\r\n    this.groups = [];\r\n    if ( 'undefined' !== typeof group )\r\n      this.addGroup( group );\r\n  };\r\n  Assert.prototype = {\r\n    construct: Assert,\r\n    requiresValidation: function ( group ) {\r\n      if ( group && !this.hasGroup( group ) )\r\n        return false;\r\n      if ( !group && this.hasGroups() )\r\n        return false;\r\n      return true;\r\n    },\r\n    check: function ( value, group ) {\r\n      if ( !this.requiresValidation( group ) )\r\n        return;\r\n      try {\r\n        return this.validate( value, group );\r\n      } catch ( violation ) {\r\n        return violation;\r\n      }\r\n    },\r\n    hasGroup: function ( group ) {\r\n      if ( _isArray( group ) )\r\n        return this.hasOneOf( group );\r\n      // All Asserts respond to \"Any\" group\r\n      if ( 'Any' === group )\r\n        return true;\r\n      // Asserts with no group also respond to \"Default\" group. Else return false\r\n      if ( !this.hasGroups() )\r\n        return 'Default' === group;\r\n      return -1 !== this.groups.indexOf( group );\r\n    },\r\n    hasOneOf: function ( groups ) {\r\n      for ( var i = 0; i < groups.length; i++ )\r\n        if ( this.hasGroup( groups[ i ] ) )\r\n          return true;\r\n      return false;\r\n    },\r\n    hasGroups: function () {\r\n      return this.groups.length > 0;\r\n    },\r\n    addGroup: function ( group ) {\r\n      if ( _isArray( group ) )\r\n        return this.addGroups( group );\r\n      if ( !this.hasGroup( group ) )\r\n        this.groups.push( group );\r\n      return this;\r\n    },\r\n    removeGroup: function ( group ) {\r\n      var _groups = [];\r\n      for ( var i = 0; i < this.groups.length; i++ )\r\n        if ( group !== this.groups[ i ] )\r\n          _groups.push( this.groups[ i ] );\r\n      this.groups = _groups;\r\n      return this;\r\n    },\r\n    addGroups: function ( groups ) {\r\n      for ( var i = 0; i < groups.length; i++ )\r\n        this.addGroup( groups[ i ] );\r\n      return this;\r\n    },\r\n    /**\r\n    * Asserts definitions\r\n    */\r\n    HaveProperty: function ( node ) {\r\n      this.__class__ = 'HaveProperty';\r\n      this.node = node;\r\n      this.validate = function ( object ) {\r\n        if ( 'undefined' === typeof object[ this.node ] )\r\n          throw new Violation( this, object, { value: this.node } );\r\n        return true;\r\n      };\r\n      return this;\r\n    },\r\n    Blank: function () {\r\n      this.__class__ = 'Blank';\r\n      this.validate = function ( value ) {\r\n        if ( 'string' !== typeof value )\r\n          throw new Violation( this, value, { value: Validator.errorCode.must_be_a_string } );\r\n        if ( '' !== value.replace( /^\\s+/g, '' ).replace( /\\s+$/g, '' ) )\r\n          throw new Violation( this, value );\r\n        return true;\r\n      };\r\n      return this;\r\n    },\r\n    Callback: function ( fn ) {\r\n      this.__class__ = 'Callback';\r\n      this.arguments = Array.prototype.slice.call( arguments );\r\n      if ( 1 === this.arguments.length )\r\n        this.arguments = [];\r\n      else\r\n        this.arguments.splice( 0, 1 );\r\n      if ( 'function' !== typeof fn )\r\n        throw new Error( 'Callback must be instanciated with a function' );\r\n      this.fn = fn;\r\n      this.validate = function ( value ) {\r\n        var result = this.fn.apply( this, [ value ].concat( this.arguments ) );\r\n        if ( true !== result )\r\n          throw new Violation( this, value, { result: result } );\r\n        return true;\r\n      };\r\n      return this;\r\n    },\r\n    Choice: function ( list ) {\r\n      this.__class__ = 'Choice';\r\n      if ( !_isArray( list ) && 'function' !== typeof list )\r\n        throw new Error( 'Choice must be instanciated with an array or a function' );\r\n      this.list = list;\r\n      this.validate = function ( value ) {\r\n        var list = 'function' === typeof this.list ? this.list() : this.list;\r\n        for ( var i = 0; i < list.length; i++ )\r\n          if ( value === list[ i ] )\r\n            return true;\r\n        throw new Violation( this, value, { choices: list } );\r\n      };\r\n      return this;\r\n    },\r\n    Collection: function ( assertOrConstraint ) {\r\n      this.__class__ = 'Collection';\r\n      this.constraint = 'undefined' !== typeof assertOrConstraint ? (assertOrConstraint instanceof Assert ? assertOrConstraint : new Constraint( assertOrConstraint )) : false;\r\n      this.validate = function ( collection, group ) {\r\n        var result, validator = new Validator(), count = 0, failures = {}, groups = this.groups.length ? this.groups : group;\r\n        if ( !_isArray( collection ) )\r\n          throw new Violation( this, collection, { value: Validator.errorCode.must_be_an_array } );\r\n        for ( var i = 0; i < collection.length; i++ ) {\r\n          result = this.constraint ?\r\n            validator.validate( collection[ i ], this.constraint, groups ) :\r\n            validator.validate( collection[ i ], groups );\r\n          if ( !_isEmptyObject( result ) )\r\n            failures[ count ] = result;\r\n          count++;\r\n        }\r\n        return !_isEmptyObject( failures ) ? failures : true;\r\n      };\r\n      return this;\r\n    },\r\n    Count: function ( count ) {\r\n      this.__class__ = 'Count';\r\n      this.count = count;\r\n      this.validate = function ( array ) {\r\n        if ( !_isArray( array ) )\r\n          throw new Violation( this, array, { value: Validator.errorCode.must_be_an_array } );\r\n        var count = 'function' === typeof this.count ? this.count( array ) : this.count;\r\n        if ( isNaN( Number( count ) ) )\r\n          throw new Error( 'Count must be a valid interger', count );\r\n        if ( count !== array.length )\r\n          throw new Violation( this, array, { count: count } );\r\n        return true;\r\n      };\r\n      return this;\r\n    },\r\n    Email: function () {\r\n      this.__class__ = 'Email';\r\n      this.validate = function ( value ) {\r\n        var regExp = /^((([a-z]|\\d|[!#\\$%&'\\*\\+\\-\\/=\\?\\^_`{\\|}~]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])+(\\.([a-z]|\\d|[!#\\$%&'\\*\\+\\-\\/=\\?\\^_`{\\|}~]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])+)*)|((\\x22)((((\\x20|\\x09)*(\\x0d\\x0a))?(\\x20|\\x09)+)?(([\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x7f]|\\x21|[\\x23-\\x5b]|[\\x5d-\\x7e]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(\\\\([\\x01-\\x09\\x0b\\x0c\\x0d-\\x7f]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]))))*(((\\x20|\\x09)*(\\x0d\\x0a))?(\\x20|\\x09)+)?(\\x22)))@((([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])*([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])))\\.)+(([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])*([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])))$/i;\r\n        if ( 'string' !== typeof value )\r\n          throw new Violation( this, value, { value: Validator.errorCode.must_be_a_string } );\r\n        if ( !regExp.test( value ) )\r\n          throw new Violation( this, value );\r\n        return true;\r\n      };\r\n      return this;\r\n    },\r\n    EqualTo: function ( reference ) {\r\n      this.__class__ = 'EqualTo';\r\n      if ( 'undefined' === typeof reference )\r\n        throw new Error( 'EqualTo must be instanciated with a value or a function' );\r\n      this.reference = reference;\r\n      this.validate = function ( value ) {\r\n        var reference = 'function' === typeof this.reference ? this.reference( value ) : this.reference;\r\n        if ( reference !== value )\r\n          throw new Violation( this, value, { value: reference } );\r\n        return true;\r\n      };\r\n      return this;\r\n    },\r\n    GreaterThan: function ( threshold ) {\r\n      this.__class__ = 'GreaterThan';\r\n      if ( 'undefined' === typeof threshold )\r\n        throw new Error( 'Should give a threshold value' );\r\n      this.threshold = threshold;\r\n      this.validate = function ( value ) {\r\n        if ( '' === value || isNaN( Number( value ) ) )\r\n          throw new Violation( this, value, { value: Validator.errorCode.must_be_a_number } );\r\n        if ( this.threshold >= value )\r\n          throw new Violation( this, value, { threshold: this.threshold } );\r\n        return true;\r\n      };\r\n      return this;\r\n    },\r\n    GreaterThanOrEqual: function ( threshold ) {\r\n      this.__class__ = 'GreaterThanOrEqual';\r\n      if ( 'undefined' === typeof threshold )\r\n        throw new Error( 'Should give a threshold value' );\r\n      this.threshold = threshold;\r\n      this.validate = function ( value ) {\r\n        if ( '' === value || isNaN( Number( value ) ) )\r\n          throw new Violation( this, value, { value: Validator.errorCode.must_be_a_number } );\r\n        if ( this.threshold > value )\r\n          throw new Violation( this, value, { threshold: this.threshold } );\r\n        return true;\r\n      };\r\n      return this;\r\n    },\r\n    InstanceOf: function ( classRef ) {\r\n      this.__class__ = 'InstanceOf';\r\n      if ( 'undefined' === typeof classRef )\r\n        throw new Error( 'InstanceOf must be instanciated with a value' );\r\n      this.classRef = classRef;\r\n      this.validate = function ( value ) {\r\n        if ( true !== (value instanceof this.classRef) )\r\n          throw new Violation( this, value, { classRef: this.classRef } );\r\n        return true;\r\n      };\r\n      return this;\r\n    },\r\n    Length: function ( boundaries ) {\r\n      this.__class__ = 'Length';\r\n      if ( !boundaries.min && !boundaries.max )\r\n        throw new Error( 'Lenth assert must be instanciated with a { min: x, max: y } object' );\r\n      this.min = boundaries.min;\r\n      this.max = boundaries.max;\r\n      this.validate = function ( value ) {\r\n        if ( 'string' !== typeof value && !_isArray( value ) )\r\n          throw new Violation( this, value, { value: Validator.errorCode.must_be_a_string_or_array } );\r\n        if ( 'undefined' !== typeof this.min && this.min === this.max && value.length !== this.min )\r\n          throw new Violation( this, value, { min: this.min, max: this.max } );\r\n        if ( 'undefined' !== typeof this.max && value.length > this.max )\r\n          throw new Violation( this, value, { max: this.max } );\r\n        if ( 'undefined' !== typeof this.min && value.length < this.min )\r\n          throw new Violation( this, value, { min: this.min } );\r\n        return true;\r\n      };\r\n      return this;\r\n    },\r\n    LessThan: function ( threshold ) {\r\n      this.__class__ = 'LessThan';\r\n      if ( 'undefined' === typeof threshold )\r\n        throw new Error( 'Should give a threshold value' );\r\n      this.threshold = threshold;\r\n      this.validate = function ( value ) {\r\n        if ( '' === value || isNaN( Number( value ) ) )\r\n          throw new Violation( this, value, { value: Validator.errorCode.must_be_a_number } );\r\n        if ( this.threshold <= value )\r\n          throw new Violation( this, value, { threshold: this.threshold } );\r\n        return true;\r\n      };\r\n      return this;\r\n    },\r\n    LessThanOrEqual: function ( threshold ) {\r\n      this.__class__ = 'LessThanOrEqual';\r\n      if ( 'undefined' === typeof threshold )\r\n        throw new Error( 'Should give a threshold value' );\r\n      this.threshold = threshold;\r\n      this.validate = function ( value ) {\r\n        if ( '' === value || isNaN( Number( value ) ) )\r\n          throw new Violation( this, value, { value: Validator.errorCode.must_be_a_number } );\r\n        if ( this.threshold < value )\r\n          throw new Violation( this, value, { threshold: this.threshold } );\r\n        return true;\r\n      };\r\n      return this;\r\n    },\r\n    NotNull: function () {\r\n      this.__class__ = 'NotNull';\r\n      this.validate = function ( value ) {\r\n        if ( null === value || 'undefined' === typeof value )\r\n          throw new Violation( this, value );\r\n        return true;\r\n      };\r\n      return this;\r\n    },\r\n    NotBlank: function () {\r\n      this.__class__ = 'NotBlank';\r\n      this.validate = function ( value ) {\r\n        if ( 'string' !== typeof value )\r\n          throw new Violation( this, value, { value: Validator.errorCode.must_be_a_string } );\r\n        if ( '' === value.replace( /^\\s+/g, '' ).replace( /\\s+$/g, '' ) )\r\n          throw new Violation( this, value );\r\n        return true;\r\n      };\r\n      return this;\r\n    },\r\n    Null: function () {\r\n      this.__class__ = 'Null';\r\n      this.validate = function ( value ) {\r\n        if ( null !== value )\r\n          throw new Violation( this, value );\r\n        return true;\r\n      };\r\n      return this;\r\n    },\r\n    Range: function ( min, max ) {\r\n      this.__class__ = 'Range';\r\n      if ( 'undefined' === typeof min || 'undefined' === typeof max )\r\n        throw new Error( 'Range assert expects min and max values' );\r\n      this.min = min;\r\n      this.max = max;\r\n      this.validate = function ( value ) {\r\n          try {\r\n            // validate strings and objects with their Length\r\n            if ( ( 'string' === typeof value && isNaN( Number( value ) ) ) || _isArray( value ) )\r\n              new Assert().Length( { min: this.min, max: this.max } ).validate( value );\r\n            // validate numbers with their value\r\n            else\r\n              new Assert().GreaterThanOrEqual( this.min ).validate( value ) && new Assert().LessThanOrEqual( this.max ).validate( value );\r\n            return true;\r\n          } catch ( violation ) {\r\n            throw new Violation( this, value, violation.violation );\r\n          }\r\n        return true;\r\n      };\r\n      return this;\r\n    },\r\n    Regexp: function ( regexp, flag ) {\r\n      this.__class__ = 'Regexp';\r\n      if ( 'undefined' === typeof regexp )\r\n        throw new Error( 'You must give a regexp' );\r\n      this.regexp = regexp;\r\n      this.flag = flag || '';\r\n      this.validate = function ( value ) {\r\n        if ( 'string' !== typeof value )\r\n          throw new Violation( this, value, { value: Validator.errorCode.must_be_a_string } );\r\n        if ( !new RegExp( this.regexp, this.flag ).test( value ) )\r\n          throw new Violation( this, value, { regexp: this.regexp, flag: this.flag } );\r\n        return true;\r\n      };\r\n      return this;\r\n    },\r\n    Required: function () {\r\n      this.__class__ = 'Required';\r\n      this.validate = function ( value ) {\r\n        if ( 'undefined' === typeof value )\r\n          throw new Violation( this, value );\r\n        try {\r\n          if ( 'string' === typeof value )\r\n            new Assert().NotNull().validate( value ) && new Assert().NotBlank().validate( value );\r\n          else if ( true === _isArray( value ) )\r\n            new Assert().Length( { min: 1 } ).validate( value );\r\n        } catch ( violation ) {\r\n          throw new Violation( this, value );\r\n        }\r\n        return true;\r\n      };\r\n      return this;\r\n    },\r\n    // Unique() or Unique ( { key: foo } )\r\n    Unique: function ( object ) {\r\n      this.__class__ = 'Unique';\r\n      if ( 'object' === typeof object )\r\n        this.key = object.key;\r\n      this.validate = function ( array ) {\r\n        var value, store = [];\r\n        if ( !_isArray( array ) )\r\n          throw new Violation( this, array, { value: Validator.errorCode.must_be_an_array } );\r\n        for ( var i = 0; i < array.length; i++ ) {\r\n          value = 'object' === typeof array[ i ] ? array[ i ][ this.key ] : array[ i ];\r\n          if ( 'undefined' === typeof value )\r\n            continue;\r\n          if ( -1 !== store.indexOf( value ) )\r\n            throw new Violation( this, array, { value: value } );\r\n          store.push( value );\r\n        }\r\n        return true;\r\n      };\r\n      return this;\r\n    }\r\n  };\r\n  // expose to the world these awesome classes\r\n  exports.Assert = Assert;\r\n  exports.Validator = Validator;\r\n  exports.Violation = Violation;\r\n  exports.Constraint = Constraint;\r\n  /**\r\n  * Some useful object prototypes / functions here\r\n  */\r\n  // IE8<= compatibility\r\n  // https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/indexOf\r\n  if (!Array.prototype.indexOf)\r\n    Array.prototype.indexOf = function (searchElement /*, fromIndex */ ) {\r\n        \"use strict\";\r\n        if (this === null) {\r\n            throw new TypeError();\r\n        }\r\n        var t = Object(this);\r\n        var len = t.length >>> 0;\r\n        if (len === 0) {\r\n            return -1;\r\n        }\r\n        var n = 0;\r\n        if (arguments.length > 1) {\r\n            n = Number(arguments[1]);\r\n            if (n != n) { // shortcut for verifying if it's NaN\r\n                n = 0;\r\n            } else if (n !== 0 && n != Infinity && n != -Infinity) {\r\n                n = (n > 0 || -1) * Math.floor(Math.abs(n));\r\n            }\r\n        }\r\n        if (n >= len) {\r\n            return -1;\r\n        }\r\n        var k = n >= 0 ? n : Math.max(len - Math.abs(n), 0);\r\n        for (; k < len; k++) {\r\n            if (k in t && t[k] === searchElement) {\r\n                return k;\r\n            }\r\n        }\r\n        return -1;\r\n    };\r\n  // Test if object is empty, useful for Constraint violations check\r\n  var _isEmptyObject = function ( obj ) {\r\n    for ( var property in obj )\r\n      return false;\r\n    return true;\r\n  };\r\n  var _isArray = function ( obj ) {\r\n    return Object.prototype.toString.call( obj ) === '[object Array]';\r\n  };\r\n  // AMD export\r\n  if ( typeof define === 'function' && define.amd ) {\r\n    define( 'vendors/validator.js/dist/validator',[],function() {\r\n      return exports;\r\n    } );\r\n  // commonjs export\r\n  } else if ( typeof module !== 'undefined' && module.exports ) {\r\n    module.exports = exports;\r\n  // browser\r\n  } else {\r\n    window[ 'undefined' !== typeof validatorjs_ns ? validatorjs_ns : 'Validator' ] = exports;\r\n  }\r\n\r\n  return exports;\r\n} )( );\r\n\r\n  // This is needed for Browserify usage that requires Validator.js through module.exports\r\n  Validator = 'undefined' !== typeof Validator ? Validator : ('undefined' !== typeof module ? module.exports : null);\r\n  var ParsleyValidator = function (validators, catalog) {\r\n    this.__class__ = 'ParsleyValidator';\r\n    this.Validator = Validator;\r\n    // Default Parsley locale is en\r\n    this.locale = 'en';\r\n    this.init(validators || {}, catalog || {});\r\n  };\r\n  ParsleyValidator.prototype = {\r\n    init: function (validators, catalog) {\r\n      this.catalog = catalog;\r\n      // Copy prototype's validators:\r\n      this.validators = $.extend({}, this.validators);\r\n      for (var name in validators)\r\n        this.addValidator(name, validators[name].fn, validators[name].priority, validators[name].requirementsTransformer);\r\n      window.Parsley.trigger('parsley:validator:init');\r\n    },\r\n    // Set new messages locale if we have dictionary loaded in ParsleyConfig.i18n\r\n    setLocale: function (locale) {\r\n      if ('undefined' === typeof this.catalog[locale])\r\n        throw new Error(locale + ' is not available in the catalog');\r\n      this.locale = locale;\r\n      return this;\r\n    },\r\n    // Add a new messages catalog for a given locale. Set locale for this catalog if set === `true`\r\n    addCatalog: function (locale, messages, set) {\r\n      if ('object' === typeof messages)\r\n        this.catalog[locale] = messages;\r\n      if (true === set)\r\n        return this.setLocale(locale);\r\n      return this;\r\n    },\r\n    // Add a specific message for a given constraint in a given locale\r\n    addMessage: function (locale, name, message) {\r\n      if ('undefined' === typeof this.catalog[locale])\r\n        this.catalog[locale] = {};\r\n      this.catalog[locale][name.toLowerCase()] = message;\r\n      return this;\r\n    },\r\n    validate: function (value, constraints, priority) {\r\n      return new this.Validator.Validator().validate.apply(new Validator.Validator(), arguments);\r\n    },\r\n    // Add a new validator\r\n    addValidator: function (name, fn, priority, requirementsTransformer) {\r\n      if (this.validators[name])\r\n        ParsleyUtils.warn('Validator \"' + name + '\" is already defined.');\r\n      else if (ParsleyDefaults.hasOwnProperty(name)) {\r\n        ParsleyUtils.warn('\"' + name + '\" is a restricted keyword and is not a valid validator name.');\r\n        return;\r\n      };\r\n      return this._setValidator(name, fn, priority, requirementsTransformer);\r\n    },\r\n    updateValidator: function (name, fn, priority, requirementsTransformer) {\r\n      if (!this.validators[name]) {\r\n        ParsleyUtils.warn('Validator \"' + name + '\" is not already defined.');\r\n        return this.addValidator(name, fn, priority, requirementsTransformer);\r\n      }\r\n      return this._setValidator(name, fn, priority, requirementsTransformer);\r\n    },\r\n    removeValidator: function (name) {\r\n      if (!this.validators[name])\r\n        ParsleyUtils.warn('Validator \"' + name + '\" is not defined.');\r\n      delete this.validators[name];\r\n      return this;\r\n    },\r\n    _setValidator: function (name, fn, priority, requirementsTransformer) {\r\n      this.validators[name] = function (requirements) {\r\n        return $.extend(new Validator.Assert().Callback(fn, requirements), {\r\n          priority: priority,\r\n          requirementsTransformer: requirementsTransformer\r\n        });\r\n      };\r\n      return this;\r\n    },\r\n    getErrorMessage: function (constraint) {\r\n      var message;\r\n      // Type constraints are a bit different, we have to match their requirements too to find right error message\r\n      if ('type' === constraint.name) {\r\n        var typeMessages = this.catalog[this.locale][constraint.name] || {};\r\n        message = typeMessages[constraint.requirements];\r\n      } else\r\n        message = this.formatMessage(this.catalog[this.locale][constraint.name], constraint.requirements);\r\n      return message || this.catalog[this.locale].defaultMessage || this.catalog.en.defaultMessage;\r\n    },\r\n    // Kind of light `sprintf()` implementation\r\n    formatMessage: function (string, parameters) {\r\n      if ('object' === typeof parameters) {\r\n        for (var i in parameters)\r\n          string = this.formatMessage(string, parameters[i]);\r\n        return string;\r\n      }\r\n      return 'string' === typeof string ? string.replace(new RegExp('%s', 'i'), parameters) : '';\r\n    },\r\n    // Here is the Parsley default validators list.\r\n    // This is basically Validatorjs validators, with different API for some of them\r\n    // and a Parsley priority set\r\n    validators: {\r\n      notblank: function () {\r\n        return $.extend(new Validator.Assert().NotBlank(), { priority: 2 });\r\n      },\r\n      required: function () {\r\n        return $.extend(new Validator.Assert().Required(), { priority: 512 });\r\n      },\r\n      type: function (type) {\r\n        var assert;\r\n        switch (type) {\r\n          case 'email':\r\n            assert = new Validator.Assert().Email();\r\n            break;\r\n          // range type just ensure we have a number here\r\n          case 'range':\r\n          case 'number':\r\n            assert = new Validator.Assert().Regexp('^-?(?:\\\\d+|\\\\d{1,3}(?:,\\\\d{3})+)?(?:\\\\.\\\\d+)?$');\r\n            break;\r\n          case 'integer':\r\n            assert = new Validator.Assert().Regexp('^-?\\\\d+$');\r\n            break;\r\n          case 'digits':\r\n            assert = new Validator.Assert().Regexp('^\\\\d+$');\r\n            break;\r\n          case 'alphanum':\r\n            assert = new Validator.Assert().Regexp('^\\\\w+$', 'i');\r\n            break;\r\n          case 'url':\r\n            // Thanks to https://gist.github.com/dperini/729294\r\n            // Voted best validator in https://mathiasbynens.be/demo/url-regex\r\n            // Modified to make scheme optional and allow local IPs\r\n            assert = new Validator.Assert().Regexp(\r\n              \"^\" +\r\n                // protocol identifier\r\n                \"(?:(?:https?|ftp)://)?\" + // ** mod: make scheme optional\r\n                // user:pass authentication\r\n                \"(?:\\\\S+(?::\\\\S*)?@)?\" +\r\n                \"(?:\" +\r\n                  // IP address exclusion\r\n                  // private & local networks\r\n                  // \"(?!(?:10|127)(?:\\\\.\\\\d{1,3}){3})\" +   // ** mod: allow local networks\r\n                  // \"(?!(?:169\\\\.254|192\\\\.168)(?:\\\\.\\\\d{1,3}){2})\" +  // ** mod: allow local networks\r\n                  // \"(?!172\\\\.(?:1[6-9]|2\\\\d|3[0-1])(?:\\\\.\\\\d{1,3}){2})\" +  // ** mod: allow local networks\r\n                  // IP address dotted notation octets\r\n                  // excludes loopback network 0.0.0.0\r\n                  // excludes reserved space >= 224.0.0.0\r\n                  // excludes network & broacast addresses\r\n                  // (first & last IP address of each class)\r\n                  \"(?:[1-9]\\\\d?|1\\\\d\\\\d|2[01]\\\\d|22[0-3])\" +\r\n                  \"(?:\\\\.(?:1?\\\\d{1,2}|2[0-4]\\\\d|25[0-5])){2}\" +\r\n                  \"(?:\\\\.(?:[1-9]\\\\d?|1\\\\d\\\\d|2[0-4]\\\\d|25[0-4]))\" +\r\n                \"|\" +\r\n                  // host name\r\n                  \"(?:(?:[a-z\\\\u00a1-\\\\uffff0-9]-*)*[a-z\\\\u00a1-\\\\uffff0-9]+)\" +\r\n                  // domain name\r\n                  \"(?:\\\\.(?:[a-z\\\\u00a1-\\\\uffff0-9]-*)*[a-z\\\\u00a1-\\\\uffff0-9]+)*\" +\r\n                  // TLD identifier\r\n                  \"(?:\\\\.(?:[a-z\\\\u00a1-\\\\uffff]{2,}))\" +\r\n                \")\" +\r\n                // port number\r\n                \"(?::\\\\d{2,5})?\" +\r\n                // resource path\r\n                \"(?:/\\\\S*)?\" +\r\n              \"$\", 'i');\r\n            break;\r\n          default:\r\n            throw new Error('validator type `' + type + '` is not supported');\r\n        }\r\n        return $.extend(assert, { priority: 256 });\r\n      },\r\n      pattern: function (regexp) {\r\n        var flags = '';\r\n        // Test if RegExp is literal, if not, nothing to be done, otherwise, we need to isolate flags and pattern\r\n        if (!!(/^\\/.*\\/(?:[gimy]*)$/.test(regexp))) {\r\n          // Replace the regexp literal string with the first match group: ([gimy]*)\r\n          // If no flag is present, this will be a blank string\r\n          flags = regexp.replace(/.*\\/([gimy]*)$/, '$1');\r\n          // Again, replace the regexp literal string with the first match group:\r\n          // everything excluding the opening and closing slashes and the flags\r\n          regexp = regexp.replace(new RegExp('^/(.*?)/' + flags + '$'), '$1');\r\n        }\r\n        return $.extend(new Validator.Assert().Regexp(regexp, flags), { priority: 64 });\r\n      },\r\n      minlength: function (value) {\r\n        return $.extend(new Validator.Assert().Length({ min: value }), {\r\n          priority: 30,\r\n          requirementsTransformer: function () {\r\n            return 'string' === typeof value && !isNaN(value) ? parseInt(value, 10) : value;\r\n          }\r\n        });\r\n      },\r\n      maxlength: function (value) {\r\n        return $.extend(new Validator.Assert().Length({ max: value }), {\r\n          priority: 30,\r\n          requirementsTransformer: function () {\r\n            return 'string' === typeof value && !isNaN(value) ? parseInt(value, 10) : value;\r\n          }\r\n        });\r\n      },\r\n      length: function (array) {\r\n        return $.extend(new Validator.Assert().Length({ min: array[0], max: array[1] }), { priority: 32 });\r\n      },\r\n      mincheck: function (length) {\r\n        return this.minlength(length);\r\n      },\r\n      maxcheck: function (length) {\r\n        return this.maxlength(length);\r\n      },\r\n      check: function (array) {\r\n        return this.length(array);\r\n      },\r\n      min: function (value) {\r\n        return $.extend(new Validator.Assert().GreaterThanOrEqual(value), {\r\n          priority: 30,\r\n          requirementsTransformer: function () {\r\n            return 'string' === typeof value && !isNaN(value) ? parseInt(value, 10) : value;\r\n          }\r\n        });\r\n      },\r\n      max: function (value) {\r\n        return $.extend(new Validator.Assert().LessThanOrEqual(value), {\r\n          priority: 30,\r\n          requirementsTransformer: function () {\r\n            return 'string' === typeof value && !isNaN(value) ? parseInt(value, 10) : value;\r\n          }\r\n        });\r\n      },\r\n      range: function (array) {\r\n        return $.extend(new Validator.Assert().Range(array[0], array[1]), {\r\n          priority: 32,\r\n          requirementsTransformer: function () {\r\n            for (var i = 0; i < array.length; i++)\r\n              array[i] = 'string' === typeof array[i] && !isNaN(array[i]) ? parseInt(array[i], 10) : array[i];\r\n            return array;\r\n          }\r\n        });\r\n      },\r\n      equalto: function (value) {\r\n        return $.extend(new Validator.Assert().EqualTo(value), {\r\n          priority: 256,\r\n          requirementsTransformer: function () {\r\n            return $(value).length ? $(value).val() : value;\r\n          }\r\n        });\r\n      }\r\n    }\r\n  };\r\n\r\n  var ParsleyUI = function (options) {\r\n    this.__class__ = 'ParsleyUI';\r\n  };\r\n  ParsleyUI.prototype = {\r\n    listen: function () {\r\n      var that = this;\r\n      window.Parsley\r\n      .on('form:init',       function () { that.setupForm (this); } )\r\n      .on('field:init',      function () { that.setupField(this); } )\r\n      .on('field:validated', function () { that.reflow    (this); } )\r\n      .on('form:validated',  function () { that.focus     (this); } )\r\n      .on('field:reset',     function () { that.reset     (this); } )\r\n      .on('form:destroy',    function () { that.destroy   (this); } )\r\n      .on('field:destroy',   function () { that.destroy   (this); } );\r\n      return this;\r\n    },\r\n    reflow: function (fieldInstance) {\r\n      // If this field has not an active UI (case for multiples) don't bother doing something\r\n      if ('undefined' === typeof fieldInstance._ui || false === fieldInstance._ui.active)\r\n        return;\r\n      // Diff between two validation results\r\n      var diff = this._diff(fieldInstance.validationResult, fieldInstance._ui.lastValidationResult);\r\n      // Then store current validation result for next reflow\r\n      fieldInstance._ui.lastValidationResult = fieldInstance.validationResult;\r\n      // Field have been validated at least once if here. Useful for binded key events...\r\n      fieldInstance._ui.validatedOnce = true;\r\n      // Handle valid / invalid / none field class\r\n      this.manageStatusClass(fieldInstance);\r\n      // Add, remove, updated errors messages\r\n      this.manageErrorsMessages(fieldInstance, diff);\r\n      // Triggers impl\r\n      this.actualizeTriggers(fieldInstance);\r\n      // If field is not valid for the first time, bind keyup trigger to ease UX and quickly inform user\r\n      if ((diff.kept.length || diff.added.length) && true !== fieldInstance._ui.failedOnce)\r\n        this.manageFailingFieldTrigger(fieldInstance);\r\n    },\r\n    // Returns an array of field's error message(s)\r\n    getErrorsMessages: function (fieldInstance) {\r\n      // No error message, field is valid\r\n      if (true === fieldInstance.validationResult)\r\n        return [];\r\n      var messages = [];\r\n      for (var i = 0; i < fieldInstance.validationResult.length; i++)\r\n        messages.push(this._getErrorMessage(fieldInstance, fieldInstance.validationResult[i].assert));\r\n      return messages;\r\n    },\r\n    manageStatusClass: function (fieldInstance) {\r\n      if (fieldInstance.hasConstraints() && fieldInstance.needsValidation() && true === fieldInstance.validationResult)\r\n        this._successClass(fieldInstance);\r\n      else if (fieldInstance.validationResult.length > 0)\r\n        this._errorClass(fieldInstance);\r\n      else\r\n        this._resetClass(fieldInstance);\r\n    },\r\n    manageErrorsMessages: function (fieldInstance, diff) {\r\n      if ('undefined' !== typeof fieldInstance.options.errorsMessagesDisabled)\r\n        return;\r\n      // Case where we have errorMessage option that configure an unique field error message, regardless failing validators\r\n      if ('undefined' !== typeof fieldInstance.options.errorMessage) {\r\n        if ((diff.added.length || diff.kept.length)) {\r\n          this._insertErrorWrapper(fieldInstance);\r\n          if (0 === fieldInstance._ui.$errorsWrapper.find('.parsley-custom-error-message').length)\r\n            fieldInstance._ui.$errorsWrapper\r\n              .append(\r\n                $(fieldInstance.options.errorTemplate)\r\n                .addClass('parsley-custom-error-message')\r\n              );\r\n          return fieldInstance._ui.$errorsWrapper\r\n            .addClass('filled')\r\n            .find('.parsley-custom-error-message')\r\n            .html(fieldInstance.options.errorMessage);\r\n        }\r\n        return fieldInstance._ui.$errorsWrapper\r\n          .removeClass('filled')\r\n          .find('.parsley-custom-error-message')\r\n          .remove();\r\n      }\r\n      // Show, hide, update failing constraints messages\r\n      for (var i = 0; i < diff.removed.length; i++)\r\n        this.removeError(fieldInstance, diff.removed[i].assert.name, true);\r\n      for (i = 0; i < diff.added.length; i++)\r\n        this.addError(fieldInstance, diff.added[i].assert.name, undefined, diff.added[i].assert, true);\r\n      for (i = 0; i < diff.kept.length; i++)\r\n        this.updateError(fieldInstance, diff.kept[i].assert.name, undefined, diff.kept[i].assert, true);\r\n    },\r\n    // TODO: strange API here, intuitive for manual usage with addError(pslyInstance, 'foo', 'bar')\r\n    // but a little bit complex for above internal usage, with forced undefined parameter...\r\n    addError: function (fieldInstance, name, message, assert, doNotUpdateClass) {\r\n      this._insertErrorWrapper(fieldInstance);\r\n      fieldInstance._ui.$errorsWrapper\r\n        .addClass('filled')\r\n        .append(\r\n          $(fieldInstance.options.errorTemplate)\r\n          .addClass('parsley-' + name)\r\n          .html(message || this._getErrorMessage(fieldInstance, assert))\r\n        );\r\n      if (true !== doNotUpdateClass)\r\n        this._errorClass(fieldInstance);\r\n    },\r\n    // Same as above\r\n    updateError: function (fieldInstance, name, message, assert, doNotUpdateClass) {\r\n      fieldInstance._ui.$errorsWrapper\r\n        .addClass('filled')\r\n        .find('.parsley-' + name)\r\n        .html(message || this._getErrorMessage(fieldInstance, assert));\r\n      if (true !== doNotUpdateClass)\r\n        this._errorClass(fieldInstance);\r\n    },\r\n    // Same as above twice\r\n    removeError: function (fieldInstance, name, doNotUpdateClass) {\r\n      fieldInstance._ui.$errorsWrapper\r\n        .removeClass('filled')\r\n        .find('.parsley-' + name)\r\n        .remove();\r\n      // edge case possible here: remove a standard Parsley error that is still failing in fieldInstance.validationResult\r\n      // but highly improbable cuz' manually removing a well Parsley handled error makes no sense.\r\n      if (true !== doNotUpdateClass)\r\n        this.manageStatusClass(fieldInstance);\r\n    },\r\n    focus: function (formInstance) {\r\n      formInstance._focusedField = null;\r\n      if (true === formInstance.validationResult || 'none' === formInstance.options.focus)\r\n        return null;\r\n      for (var i = 0; i < formInstance.fields.length; i++) {\r\n        var field = formInstance.fields[i];\r\n        if (true !== field.validationResult && field.validationResult.length > 0 && 'undefined' === typeof field.options.noFocus) {\r\n          formInstance._focusedField = field.$element;\r\n          if ('first' === formInstance.options.focus)\r\n            break;\r\n        }\r\n      }\r\n      if (null === formInstance._focusedField)\r\n        return null;\r\n      return formInstance._focusedField.focus();\r\n    },\r\n    _getErrorMessage: function (fieldInstance, constraint) {\r\n      var customConstraintErrorMessage = constraint.name + 'Message';\r\n      if ('undefined' !== typeof fieldInstance.options[customConstraintErrorMessage])\r\n        return window.ParsleyValidator.formatMessage(fieldInstance.options[customConstraintErrorMessage], constraint.requirements);\r\n      return window.ParsleyValidator.getErrorMessage(constraint);\r\n    },\r\n    _diff: function (newResult, oldResult, deep) {\r\n      var\r\n        added = [],\r\n        kept = [];\r\n      for (var i = 0; i < newResult.length; i++) {\r\n        var found = false;\r\n        for (var j = 0; j < oldResult.length; j++)\r\n          if (newResult[i].assert.name === oldResult[j].assert.name) {\r\n            found = true;\r\n            break;\r\n          }\r\n        if (found)\r\n          kept.push(newResult[i]);\r\n        else\r\n          added.push(newResult[i]);\r\n      }\r\n      return {\r\n        kept: kept,\r\n        added: added,\r\n        removed: !deep ? this._diff(oldResult, newResult, true).added : []\r\n      };\r\n    },\r\n    setupForm: function (formInstance) {\r\n      formInstance.$element.on('submit.Parsley', false, $.proxy(formInstance.onSubmitValidate, formInstance));\r\n      // UI could be disabled\r\n      if (false === formInstance.options.uiEnabled)\r\n        return;\r\n      formInstance.$element.attr('novalidate', '');\r\n    },\r\n    setupField: function (fieldInstance) {\r\n      var _ui = { active: false };\r\n      // UI could be disabled\r\n      if (false === fieldInstance.options.uiEnabled)\r\n        return;\r\n      _ui.active = true;\r\n      // Give field its Parsley id in DOM\r\n      fieldInstance.$element.attr(fieldInstance.options.namespace + 'id', fieldInstance.__id__);\r\n      /** Generate important UI elements and store them in fieldInstance **/\r\n      // $errorClassHandler is the $element that woul have parsley-error and parsley-success classes\r\n      _ui.$errorClassHandler = this._manageClassHandler(fieldInstance);\r\n      // $errorsWrapper is a div that would contain the various field errors, it will be appended into $errorsContainer\r\n      _ui.errorsWrapperId = 'parsley-id-' + (fieldInstance.options.multiple ? 'multiple-' + fieldInstance.options.multiple : fieldInstance.__id__);\r\n      _ui.$errorsWrapper = $(fieldInstance.options.errorsWrapper).attr('id', _ui.errorsWrapperId);\r\n      // ValidationResult UI storage to detect what have changed bwt two validations, and update DOM accordingly\r\n      _ui.lastValidationResult = [];\r\n      _ui.validatedOnce = false;\r\n      _ui.validationInformationVisible = false;\r\n      // Store it in fieldInstance for later\r\n      fieldInstance._ui = _ui;\r\n      // Bind triggers first time\r\n      this.actualizeTriggers(fieldInstance);\r\n    },\r\n    // Determine which element will have `parsley-error` and `parsley-success` classes\r\n    _manageClassHandler: function (fieldInstance) {\r\n      // An element selector could be passed through DOM with `data-parsley-class-handler=#foo`\r\n      if ('string' === typeof fieldInstance.options.classHandler && $(fieldInstance.options.classHandler).length)\r\n        return $(fieldInstance.options.classHandler);\r\n      // Class handled could also be determined by function given in Parsley options\r\n      var $handler = fieldInstance.options.classHandler(fieldInstance);\r\n      // If this function returned a valid existing DOM element, go for it\r\n      if ('undefined' !== typeof $handler && $handler.length)\r\n        return $handler;\r\n      // Otherwise, if simple element (input, texatrea, select...) it will perfectly host the classes\r\n      if (!fieldInstance.options.multiple || fieldInstance.$element.is('select'))\r\n        return fieldInstance.$element;\r\n      // But if multiple element (radio, checkbox), that would be their parent\r\n      return fieldInstance.$element.parent();\r\n    },\r\n    _insertErrorWrapper: function (fieldInstance) {\r\n      var $errorsContainer;\r\n      // Nothing to do if already inserted\r\n      if (0 !== fieldInstance._ui.$errorsWrapper.parent().length)\r\n        return fieldInstance._ui.$errorsWrapper.parent();\r\n      if ('string' === typeof fieldInstance.options.errorsContainer) {\r\n        if ($(fieldInstance.options.errorsContainer).length)\r\n          return $(fieldInstance.options.errorsContainer).append(fieldInstance._ui.$errorsWrapper);\r\n        else\r\n          ParsleyUtils.warn('The errors container `' + fieldInstance.options.errorsContainer + '` does not exist in DOM');\r\n      }\r\n      else if ('function' === typeof fieldInstance.options.errorsContainer)\r\n        $errorsContainer = fieldInstance.options.errorsContainer(fieldInstance);\r\n      if ('undefined' !== typeof $errorsContainer && $errorsContainer.length)\r\n        return $errorsContainer.append(fieldInstance._ui.$errorsWrapper);\r\n      var $from = fieldInstance.$element;\r\n      if (fieldInstance.options.multiple)\r\n        $from = $from.parent();\r\n      return $from.after(fieldInstance._ui.$errorsWrapper);\r\n    },\r\n    actualizeTriggers: function (fieldInstance) {\r\n      var $toBind = fieldInstance.$element;\r\n      if (fieldInstance.options.multiple)\r\n        $toBind = $('[' + fieldInstance.options.namespace + 'multiple=\"' + fieldInstance.options.multiple + '\"]');\r\n      // Remove Parsley events already binded on this field\r\n      $toBind.off('.Parsley');\r\n      // If no trigger is set, all good\r\n      if (false === fieldInstance.options.trigger)\r\n        return;\r\n      var triggers = fieldInstance.options.trigger.replace(/^\\s+/g , '').replace(/\\s+$/g , '');\r\n      if ('' === triggers)\r\n        return;\r\n      // Bind fieldInstance.eventValidate if exists (for parsley.ajax for example), ParsleyUI.eventValidate otherwise\r\n      $toBind.on(\r\n        triggers.split(' ').join('.Parsley ') + '.Parsley',\r\n        $.proxy('function' === typeof fieldInstance.eventValidate ? fieldInstance.eventValidate : this.eventValidate, fieldInstance));\r\n    },\r\n    // Called through $.proxy with fieldInstance. `this` context is ParsleyField\r\n    eventValidate: function (event) {\r\n      // For keyup, keypress, keydown... events that could be a little bit obstrusive\r\n      // do not validate if val length < min threshold on first validation. Once field have been validated once and info\r\n      // about success or failure have been displayed, always validate with this trigger to reflect every yalidation change.\r\n      if (new RegExp('key').test(event.type))\r\n        if (!this._ui.validationInformationVisible && this.getValue().length <= this.options.validationThreshold)\r\n          return;\r\n      this._ui.validatedOnce = true;\r\n      this.validate();\r\n    },\r\n    manageFailingFieldTrigger: function (fieldInstance) {\r\n      fieldInstance._ui.failedOnce = true;\r\n      // Radio and checkboxes fields must bind every field multiple\r\n      if (fieldInstance.options.multiple)\r\n        $('[' + fieldInstance.options.namespace + 'multiple=\"' + fieldInstance.options.multiple + '\"]').each(function () {\r\n          if (!new RegExp('change', 'i').test($(this).parsley().options.trigger || ''))\r\n            return $(this).on('change.ParsleyFailedOnce', false, $.proxy(fieldInstance.validate, fieldInstance));\r\n        });\r\n      // Select case\r\n      if (fieldInstance.$element.is('select'))\r\n        if (!new RegExp('change', 'i').test(fieldInstance.options.trigger || ''))\r\n          return fieldInstance.$element.on('change.ParsleyFailedOnce', false, $.proxy(fieldInstance.validate, fieldInstance));\r\n      // All other inputs fields\r\n      if (!new RegExp('keyup', 'i').test(fieldInstance.options.trigger || ''))\r\n        return fieldInstance.$element.on('keyup.ParsleyFailedOnce', false, $.proxy(fieldInstance.validate, fieldInstance));\r\n    },\r\n    reset: function (parsleyInstance) {\r\n      // Reset all event listeners\r\n      this.actualizeTriggers(parsleyInstance);\r\n      parsleyInstance.$element.off('.ParsleyFailedOnce');\r\n      // Nothing to do if UI never initialized for this field\r\n      if ('undefined' === typeof parsleyInstance._ui)\r\n        return;\r\n      if ('ParsleyForm' === parsleyInstance.__class__)\r\n        return;\r\n      // Reset all errors' li\r\n      parsleyInstance._ui.$errorsWrapper\r\n        .removeClass('filled')\r\n        .children()\r\n        .remove();\r\n      // Reset validation class\r\n      this._resetClass(parsleyInstance);\r\n      // Reset validation flags and last validation result\r\n      parsleyInstance._ui.validatedOnce = false;\r\n      parsleyInstance._ui.lastValidationResult = [];\r\n      parsleyInstance._ui.validationInformationVisible = false;\r\n      parsleyInstance._ui.failedOnce = false;\r\n    },\r\n    destroy: function (parsleyInstance) {\r\n      this.reset(parsleyInstance);\r\n      if ('ParsleyForm' === parsleyInstance.__class__)\r\n        return;\r\n      if ('undefined' !== typeof parsleyInstance._ui)\r\n        parsleyInstance._ui.$errorsWrapper.remove();\r\n      delete parsleyInstance._ui;\r\n    },\r\n    _successClass: function (fieldInstance) {\r\n      fieldInstance._ui.validationInformationVisible = true;\r\n      fieldInstance._ui.$errorClassHandler.removeClass(fieldInstance.options.errorClass).addClass(fieldInstance.options.successClass);\r\n    },\r\n    _errorClass: function (fieldInstance) {\r\n      fieldInstance._ui.validationInformationVisible = true;\r\n      fieldInstance._ui.$errorClassHandler.removeClass(fieldInstance.options.successClass).addClass(fieldInstance.options.errorClass);\r\n    },\r\n    _resetClass: function (fieldInstance) {\r\n      fieldInstance._ui.$errorClassHandler.removeClass(fieldInstance.options.successClass).removeClass(fieldInstance.options.errorClass);\r\n    }\r\n  };\r\n\r\n  var ParsleyForm = function (element, domOptions, options) {\r\n    this.__class__ = 'ParsleyForm';\r\n    this.__id__ = ParsleyUtils.generateID();\r\n    this.$element = $(element);\r\n    this.domOptions = domOptions;\r\n    this.options = options;\r\n    this.parent = window.Parsley;\r\n    this.fields = [];\r\n    this.validationResult = null;\r\n  };\r\n  ParsleyForm.prototype = {\r\n    onSubmitValidate: function (event) {\r\n      this.validate(undefined, undefined, event);\r\n      // prevent form submission if validation fails\r\n      if ((false === this.validationResult || !this._trigger('submit')) && event instanceof $.Event) {\r\n        event.stopImmediatePropagation();\r\n        event.preventDefault();\r\n      }\r\n      return this;\r\n    },\r\n    // @returns boolean\r\n    validate: function (group, force, event) {\r\n      this.submitEvent = event;\r\n      this.validationResult = true;\r\n      var fieldValidationResult = [];\r\n      // fire validate event to eventually modify things before very validation\r\n      this._trigger('validate');\r\n      // Refresh form DOM options and form's fields that could have changed\r\n      this._refreshFields();\r\n      this._withoutReactualizingFormOptions(function(){\r\n        // loop through fields to validate them one by one\r\n        for (var i = 0; i < this.fields.length; i++) {\r\n          // do not validate a field if not the same as given validation group\r\n          if (group && !this._isFieldInGroup(this.fields[i], group))\r\n            continue;\r\n          fieldValidationResult = this.fields[i].validate(force);\r\n          if (true !== fieldValidationResult && fieldValidationResult.length > 0 && this.validationResult)\r\n            this.validationResult = false;\r\n        }\r\n      });\r\n      this._trigger(this.validationResult ? 'success' : 'error');\r\n      this._trigger('validated');\r\n      return this.validationResult;\r\n    },\r\n    // Iterate over refreshed fields, and stop on first failure\r\n    isValid: function (group, force) {\r\n      this._refreshFields();\r\n      return this._withoutReactualizingFormOptions(function(){\r\n        for (var i = 0; i < this.fields.length; i++) {\r\n          // do not validate a field if not the same as given validation group\r\n          if (group && !this._isFieldInGroup(this.fields[i], group))\r\n            continue;\r\n          if (false === this.fields[i].isValid(force))\r\n            return false;\r\n        }\r\n        return true;\r\n      });\r\n    },\r\n    _isFieldInGroup: function (field, group) {\r\n      if($.isArray(field.options.group))\r\n        return -1 !== $.inArray(group, field.options.group);\r\n      return field.options.group === group;\r\n    },\r\n    _refreshFields: function () {\r\n      return this.actualizeOptions()._bindFields();\r\n    },\r\n    _bindFields: function () {\r\n      var self = this,\r\n        oldFields = this.fields;\r\n      this.fields = [];\r\n      this.fieldsMappedById = {};\r\n      this._withoutReactualizingFormOptions(function(){\r\n        this.$element\r\n        .find(this.options.inputs)\r\n        .not(this.options.excluded)\r\n        .each(function () {\r\n          var fieldInstance = new Parsley.Factory(this, {}, self);\r\n          // Only add valid and not excluded `ParsleyField` and `ParsleyFieldMultiple` children\r\n          if (('ParsleyField' === fieldInstance.__class__ || 'ParsleyFieldMultiple' === fieldInstance.__class__) && (true !== fieldInstance.options.excluded))\r\n            if ('undefined' === typeof self.fieldsMappedById[fieldInstance.__class__ + '-' + fieldInstance.__id__]) {\r\n              self.fieldsMappedById[fieldInstance.__class__ + '-' + fieldInstance.__id__] = fieldInstance;\r\n              self.fields.push(fieldInstance);\r\n            }\r\n        });\r\n        $(oldFields).not(self.fields).each(function () {\r\n          this._trigger('reset');\r\n        });\r\n      });\r\n      return this;\r\n    },\r\n    // Internal only.\r\n    // Looping on a form's fields to do validation or similar\r\n    // will trigger reactualizing options on all of them, which\r\n    // in turn will reactualize the form's options.\r\n    // To avoid calling actualizeOptions so many times on the form\r\n    // for nothing, _withoutReactualizingFormOptions temporarily disables\r\n    // the method actualizeOptions on this form while `fn` is called.\r\n    _withoutReactualizingFormOptions: function (fn) {\r\n      var oldActualizeOptions = this.actualizeOptions;\r\n      this.actualizeOptions = function() { return this };\r\n      var result = fn.call(this); // Keep the current `this`.\r\n      this.actualizeOptions = oldActualizeOptions;\r\n      return result;\r\n    },\r\n    // Internal only.\r\n    // Shortcut to trigger an event\r\n    // Returns true iff event is not interrupted and default not prevented.\r\n    _trigger: function (eventName) {\r\n      eventName = 'form:' + eventName;\r\n      return this.trigger.apply(this, arguments);\r\n    }\r\n  };\r\n\r\n  var ConstraintFactory = function (parsleyField, name, requirements, priority, isDomConstraint) {\r\n    var assert = {};\r\n    if (!new RegExp('ParsleyField').test(parsleyField.__class__))\r\n      throw new Error('ParsleyField or ParsleyFieldMultiple instance expected');\r\n    if ('function' === typeof window.ParsleyValidator.validators[name])\r\n      assert = window.ParsleyValidator.validators[name](requirements);\r\n    if ('Assert' !== assert.__parentClass__)\r\n      throw new Error('Valid validator expected');\r\n    var getPriority = function () {\r\n      if ('undefined' !== typeof parsleyField.options[name + 'Priority'])\r\n        return parsleyField.options[name + 'Priority'];\r\n      return assert.priority || 2;\r\n    };\r\n    priority = priority || getPriority();\r\n    // If validator have a requirementsTransformer, execute it\r\n    if ('function' === typeof assert.requirementsTransformer) {\r\n      requirements = assert.requirementsTransformer();\r\n      // rebuild assert with new requirements\r\n      assert = window.ParsleyValidator.validators[name](requirements);\r\n    }\r\n    return $.extend(assert, {\r\n      name: name,\r\n      requirements: requirements,\r\n      priority: priority,\r\n      groups: [priority],\r\n      isDomConstraint: isDomConstraint || ParsleyUtils.checkAttr(parsleyField.$element, parsleyField.options.namespace, name)\r\n    });\r\n  };\r\n\r\n  var ParsleyField = function (field, domOptions, options, parsleyFormInstance) {\r\n    this.__class__ = 'ParsleyField';\r\n    this.__id__ = ParsleyUtils.generateID();\r\n    this.$element = $(field);\r\n    // Set parent if we have one\r\n    if ('undefined' !== typeof parsleyFormInstance) {\r\n      this.parent = parsleyFormInstance;\r\n    }\r\n    this.options = options;\r\n    this.domOptions = domOptions;\r\n    // Initialize some properties\r\n    this.constraints = [];\r\n    this.constraintsByName = {};\r\n    this.validationResult = [];\r\n    // Bind constraints\r\n    this._bindConstraints();\r\n  };\r\n  ParsleyField.prototype = {\r\n    // # Public API\r\n    // Validate field and trigger some events for mainly `ParsleyUI`\r\n    // @returns validationResult:\r\n    //  - `true` if field valid\r\n    //  - `[Violation, [Violation...]]` if there were validation errors\r\n    validate: function (force) {\r\n      this.value = this.getValue();\r\n      // Field Validate event. `this.value` could be altered for custom needs\r\n      this._trigger('validate');\r\n      this._trigger(this.isValid(force, this.value) ? 'success' : 'error');\r\n      // Field validated event. `this.validationResult` could be altered for custom needs too\r\n      this._trigger('validated');\r\n      return this.validationResult;\r\n    },\r\n    hasConstraints: function () {\r\n      return 0 !== this.constraints.length;\r\n    },\r\n    // An empty optional field does not need validation\r\n    needsValidation: function (value) {\r\n      if ('undefined' === typeof value)\r\n        value = this.getValue();\r\n      // If a field is empty and not required, it is valid\r\n      // Except if `data-parsley-validate-if-empty` explicitely added, useful for some custom validators\r\n      if (!value.length && !this._isRequired() && 'undefined' === typeof this.options.validateIfEmpty)\r\n        return false;\r\n      return true;\r\n    },\r\n    // Just validate field. Do not trigger any event\r\n    //  - `false` if there are constraints and at least one of them failed\r\n    //  - `true` in all other cases\r\n    isValid: function (force, value) {\r\n      // Recompute options and rebind constraints to have latest changes\r\n      this.refreshConstraints();\r\n      this.validationResult = true;\r\n      // A field without constraint is valid\r\n      if (!this.hasConstraints())\r\n        return true;\r\n      // Value could be passed as argument, needed to add more power to 'parsley:field:validate'\r\n      if ('undefined' === typeof value || null === value)\r\n        value = this.getValue();\r\n      if (!this.needsValidation(value) && true !== force)\r\n        return true;\r\n      // If we want to validate field against all constraints, just call Validator and let it do the job\r\n      var priorities = ['Any'];\r\n      if (false !== this.options.priorityEnabled) {\r\n        // Sort priorities to validate more important first\r\n        priorities = this._getConstraintsSortedPriorities();\r\n      }\r\n      // Iterate over priorities one by one, and validate related asserts one by one\r\n      for (var i = 0; i < priorities.length; i++)\r\n        if (true !== (this.validationResult = this.validateThroughValidator(value, this.constraints, priorities[i])))\r\n          return false;\r\n      return true;\r\n    },\r\n    // @returns Parsley field computed value that could be overrided or configured in DOM\r\n    getValue: function () {\r\n      var value;\r\n      // Value could be overriden in DOM or with explicit options\r\n      if ('function' === typeof this.options.value)\r\n        value = this.options.value(this);\r\n      else if ('undefined' !== typeof this.options.value)\r\n        value = this.options.value;\r\n      else\r\n        value = this.$element.val();\r\n      // Handle wrong DOM or configurations\r\n      if ('undefined' === typeof value || null === value)\r\n        return '';\r\n      return this._handleWhitespace(value);\r\n    },\r\n    // Actualize options that could have change since previous validation\r\n    // Re-bind accordingly constraints (could be some new, removed or updated)\r\n    refreshConstraints: function () {\r\n      return this.actualizeOptions()._bindConstraints();\r\n    },\r\n    /**\r\n    * Add a new constraint to a field\r\n    *\r\n    * @method addConstraint\r\n    * @param {String}   name\r\n    * @param {Mixed}    requirements      optional\r\n    * @param {Number}   priority          optional\r\n    * @param {Boolean}  isDomConstraint   optional\r\n    */\r\n    addConstraint: function (name, requirements, priority, isDomConstraint) {\r\n      if ('function' === typeof window.ParsleyValidator.validators[name]) {\r\n        var constraint = new ConstraintFactory(this, name, requirements, priority, isDomConstraint);\r\n        // if constraint already exist, delete it and push new version\r\n        if ('undefined' !== this.constraintsByName[constraint.name])\r\n          this.removeConstraint(constraint.name);\r\n        this.constraints.push(constraint);\r\n        this.constraintsByName[constraint.name] = constraint;\r\n      }\r\n      return this;\r\n    },\r\n    // Remove a constraint\r\n    removeConstraint: function (name) {\r\n      for (var i = 0; i < this.constraints.length; i++)\r\n        if (name === this.constraints[i].name) {\r\n          this.constraints.splice(i, 1);\r\n          break;\r\n        }\r\n      delete this.constraintsByName[name];\r\n      return this;\r\n    },\r\n    // Update a constraint (Remove + re-add)\r\n    updateConstraint: function (name, parameters, priority) {\r\n      return this.removeConstraint(name)\r\n        .addConstraint(name, parameters, priority);\r\n    },\r\n    // # Internals\r\n    // Internal only.\r\n    // Bind constraints from config + options + DOM\r\n    _bindConstraints: function () {\r\n      var constraints = [], constraintsByName = {};\r\n      // clean all existing DOM constraints to only keep javascript user constraints\r\n      for (var i = 0; i < this.constraints.length; i++)\r\n        if (false === this.constraints[i].isDomConstraint) {\r\n          constraints.push(this.constraints[i]);\r\n          constraintsByName[this.constraints[i].name] = this.constraints[i];\r\n        }\r\n      this.constraints = constraints;\r\n      this.constraintsByName = constraintsByName;\r\n      // then re-add Parsley DOM-API constraints\r\n      for (var name in this.options)\r\n        this.addConstraint(name, this.options[name]);\r\n      // finally, bind special HTML5 constraints\r\n      return this._bindHtml5Constraints();\r\n    },\r\n    // Internal only.\r\n    // Bind specific HTML5 constraints to be HTML5 compliant\r\n    _bindHtml5Constraints: function () {\r\n      // html5 required\r\n      if (this.$element.hasClass('required') || this.$element.attr('required'))\r\n        this.addConstraint('required', true, undefined, true);\r\n      // html5 pattern\r\n      if ('string' === typeof this.$element.attr('pattern'))\r\n        this.addConstraint('pattern', this.$element.attr('pattern'), undefined, true);\r\n      // range\r\n      if ('undefined' !== typeof this.$element.attr('min') && 'undefined' !== typeof this.$element.attr('max'))\r\n        this.addConstraint('range', [this.$element.attr('min'), this.$element.attr('max')], undefined, true);\r\n      // HTML5 min\r\n      else if ('undefined' !== typeof this.$element.attr('min'))\r\n        this.addConstraint('min', this.$element.attr('min'), undefined, true);\r\n      // HTML5 max\r\n      else if ('undefined' !== typeof this.$element.attr('max'))\r\n        this.addConstraint('max', this.$element.attr('max'), undefined, true);\r\n\r\n      // length\r\n      if ('undefined' !== typeof this.$element.attr('minlength') && 'undefined' !== typeof this.$element.attr('maxlength'))\r\n        this.addConstraint('length', [this.$element.attr('minlength'), this.$element.attr('maxlength')], undefined, true);\r\n      // HTML5 minlength\r\n      else if ('undefined' !== typeof this.$element.attr('minlength'))\r\n        this.addConstraint('minlength', this.$element.attr('minlength'), undefined, true);\r\n      // HTML5 maxlength\r\n      else if ('undefined' !== typeof this.$element.attr('maxlength'))\r\n        this.addConstraint('maxlength', this.$element.attr('maxlength'), undefined, true);\r\n\r\n      // html5 types\r\n      var type = this.$element.attr('type');\r\n      if ('undefined' === typeof type)\r\n        return this;\r\n      // Small special case here for HTML5 number: integer validator if step attribute is undefined or an integer value, number otherwise\r\n      if ('number' === type) {\r\n        if (('undefined' === typeof this.$element.attr('step')) || (0 === parseFloat(this.$element.attr('step')) % 1)) {\r\n          return this.addConstraint('type', 'integer', undefined, true);\r\n        } else {\r\n          return this.addConstraint('type', 'number', undefined, true);\r\n        }\r\n      // Regular other HTML5 supported types\r\n      } else if (/^(email|url|range)$/i.test(type)) {\r\n        return this.addConstraint('type', type, undefined, true);\r\n      }\r\n      return this;\r\n    },\r\n    // Internal only.\r\n    // Field is required if have required constraint without `false` value\r\n    _isRequired: function () {\r\n      if ('undefined' === typeof this.constraintsByName.required)\r\n        return false;\r\n      return false !== this.constraintsByName.required.requirements;\r\n    },\r\n    // Internal only.\r\n    // Shortcut to trigger an event\r\n    _trigger: function (eventName) {\r\n      eventName = 'field:' + eventName;\r\n      return this.trigger.apply(this, arguments);\r\n    },\r\n    // Internal only\r\n    // Handles whitespace in a value\r\n    // Use `data-parsley-whitespace=\"squish\"` to auto squish input value\r\n    // Use `data-parsley-whitespace=\"trim\"` to auto trim input value\r\n    _handleWhitespace: function (value) {\r\n      if (true === this.options.trimValue)\r\n        ParsleyUtils.warnOnce('data-parsley-trim-value=\"true\" is deprecated, please use data-parsley-whitespace=\"trim\"');\r\n      if ('squish' === this.options.whitespace)\r\n        value = value.replace(/\\s{2,}/g, ' ');\r\n      if (('trim' === this.options.whitespace) || ('squish' === this.options.whitespace) || (true === this.options.trimValue))\r\n        value = value.replace(/^\\s+|\\s+$/g, '');\r\n      return value;\r\n    },\r\n    // Internal only.\r\n    // Sort constraints by priority DESC\r\n    _getConstraintsSortedPriorities: function () {\r\n      var priorities = [];\r\n      // Create array unique of priorities\r\n      for (var i = 0; i < this.constraints.length; i++)\r\n        if (-1 === priorities.indexOf(this.constraints[i].priority))\r\n          priorities.push(this.constraints[i].priority);\r\n      // Sort them by priority DESC\r\n      priorities.sort(function (a, b) { return b - a; });\r\n      return priorities;\r\n    }\r\n  };\r\n\r\n  var ParsleyMultiple = function () {\r\n    this.__class__ = 'ParsleyFieldMultiple';\r\n  };\r\n  ParsleyMultiple.prototype = {\r\n    // Add new `$element` sibling for multiple field\r\n    addElement: function ($element) {\r\n      this.$elements.push($element);\r\n      return this;\r\n    },\r\n    // See `ParsleyField.refreshConstraints()`\r\n    refreshConstraints: function () {\r\n      var fieldConstraints;\r\n      this.constraints = [];\r\n      // Select multiple special treatment\r\n      if (this.$element.is('select')) {\r\n        this.actualizeOptions()._bindConstraints();\r\n        return this;\r\n      }\r\n      // Gather all constraints for each input in the multiple group\r\n      for (var i = 0; i < this.$elements.length; i++) {\r\n        // Check if element have not been dynamically removed since last binding\r\n        if (!$('html').has(this.$elements[i]).length) {\r\n          this.$elements.splice(i, 1);\r\n          continue;\r\n        }\r\n        fieldConstraints = this.$elements[i].data('ParsleyFieldMultiple').refreshConstraints().constraints;\r\n        for (var j = 0; j < fieldConstraints.length; j++)\r\n          this.addConstraint(fieldConstraints[j].name, fieldConstraints[j].requirements, fieldConstraints[j].priority, fieldConstraints[j].isDomConstraint);\r\n      }\r\n      return this;\r\n    },\r\n    // See `ParsleyField.getValue()`\r\n    getValue: function () {\r\n      // Value could be overriden in DOM\r\n      if ('undefined' !== typeof this.options.value)\r\n        return this.options.value;\r\n      // Radio input case\r\n      if (this.$element.is('input[type=radio]'))\r\n        return this._findRelatedMultiple().filter(':checked').val() || '';\r\n      // checkbox input case\r\n      if (this.$element.is('input[type=checkbox]')) {\r\n        var values = [];\r\n        this._findRelatedMultiple().filter(':checked').each(function () {\r\n          values.push($(this).val());\r\n        });\r\n        return values;\r\n      }\r\n      // Select multiple case\r\n      if (this.$element.is('select') && null === this.$element.val())\r\n        return [];\r\n      // Default case that should never happen\r\n      return this.$element.val();\r\n    },\r\n    _init: function () {\r\n      this.$elements = [this.$element];\r\n      return this;\r\n    }\r\n  };\r\n\r\n  var ParsleyFactory = function (element, options, parsleyFormInstance) {\r\n    this.$element = $(element);\r\n    // If the element has already been bound, returns its saved Parsley instance\r\n    var savedparsleyFormInstance = this.$element.data('Parsley');\r\n    if (savedparsleyFormInstance) {\r\n      // If the saved instance has been bound without a ParsleyForm parent and there is one given in this call, add it\r\n      if ('undefined' !== typeof parsleyFormInstance && savedparsleyFormInstance.parent === window.Parsley) {\r\n        savedparsleyFormInstance.parent = parsleyFormInstance;\r\n        savedparsleyFormInstance._resetOptions(savedparsleyFormInstance.options);\r\n      }\r\n      return savedparsleyFormInstance;\r\n    }\r\n    // Parsley must be instantiated with a DOM element or jQuery $element\r\n    if (!this.$element.length)\r\n      throw new Error('You must bind Parsley on an existing element.');\r\n    if ('undefined' !== typeof parsleyFormInstance && 'ParsleyForm' !== parsleyFormInstance.__class__)\r\n      throw new Error('Parent instance must be a ParsleyForm instance');\r\n    this.parent = parsleyFormInstance || window.Parsley;\r\n    return this.init(options);\r\n  };\r\n  ParsleyFactory.prototype = {\r\n    init: function (options) {\r\n      this.__class__ = 'Parsley';\r\n      this.__version__ = '2.1.3';\r\n      this.__id__ = ParsleyUtils.generateID();\r\n      // Pre-compute options\r\n      this._resetOptions(options);\r\n      // A ParsleyForm instance is obviously a `<form>` element but also every node that is not an input and has the `data-parsley-validate` attribute\r\n      if (this.$element.is('form') || (ParsleyUtils.checkAttr(this.$element, this.options.namespace, 'validate') && !this.$element.is(this.options.inputs)))\r\n        return this.bind('parsleyForm');\r\n      // Every other element is bound as a `ParsleyField` or `ParsleyFieldMultiple`\r\n      return this.isMultiple() ? this.handleMultiple() : this.bind('parsleyField');\r\n    },\r\n    isMultiple: function () {\r\n      return (this.$element.is('input[type=radio], input[type=checkbox]')) || (this.$element.is('select') && 'undefined' !== typeof this.$element.attr('multiple'));\r\n    },\r\n    // Multiples fields are a real nightmare :(\r\n    // Maybe some refactoring would be appreciated here...\r\n    handleMultiple: function () {\r\n      var\r\n        that = this,\r\n        name,\r\n        multiple,\r\n        parsleyMultipleInstance;\r\n      // Handle multiple name\r\n      if (this.options.multiple)\r\n        ; // We already have our 'multiple' identifier\r\n      else if ('undefined' !== typeof this.$element.attr('name') && this.$element.attr('name').length)\r\n        this.options.multiple = name = this.$element.attr('name');\r\n      else if ('undefined' !== typeof this.$element.attr('id') && this.$element.attr('id').length)\r\n        this.options.multiple = this.$element.attr('id');\r\n      // Special select multiple input\r\n      if (this.$element.is('select') && 'undefined' !== typeof this.$element.attr('multiple')) {\r\n        this.options.multiple = this.options.multiple || this.__id__;\r\n        return this.bind('parsleyFieldMultiple');\r\n      // Else for radio / checkboxes, we need a `name` or `data-parsley-multiple` to properly bind it\r\n      } else if (!this.options.multiple) {\r\n        ParsleyUtils.warn('To be bound by Parsley, a radio, a checkbox and a multiple select input must have either a name or a multiple option.', this.$element);\r\n        return this;\r\n      }\r\n      // Remove special chars\r\n      this.options.multiple = this.options.multiple.replace(/(:|\\.|\\[|\\]|\\{|\\}|\\$)/g, '');\r\n      // Add proper `data-parsley-multiple` to siblings if we have a valid multiple name\r\n      if ('undefined' !== typeof name) {\r\n        $('input[name=\"' + name + '\"]').each(function () {\r\n          if ($(this).is('input[type=radio], input[type=checkbox]'))\r\n            $(this).attr(that.options.namespace + 'multiple', that.options.multiple);\r\n        });\r\n      }\r\n      // Check here if we don't already have a related multiple instance saved\r\n      var $previouslyRelated = this._findRelatedMultiple();\r\n      for (var i = 0; i < $previouslyRelated.length; i++) {\r\n        parsleyMultipleInstance = $($previouslyRelated.get(i)).data('Parsley');\r\n        if ('undefined' !== typeof parsleyMultipleInstance) {\r\n          if (!this.$element.data('ParsleyFieldMultiple')) {\r\n            parsleyMultipleInstance.addElement(this.$element);\r\n          }\r\n          break;\r\n        }\r\n      }\r\n      // Create a secret ParsleyField instance for every multiple field. It will be stored in `data('ParsleyFieldMultiple')`\r\n      // And will be useful later to access classic `ParsleyField` stuff while being in a `ParsleyFieldMultiple` instance\r\n      this.bind('parsleyField', true);\r\n      return parsleyMultipleInstance || this.bind('parsleyFieldMultiple');\r\n    },\r\n    // Return proper `ParsleyForm`, `ParsleyField` or `ParsleyFieldMultiple`\r\n    bind: function (type, doNotStore) {\r\n      var parsleyInstance;\r\n      switch (type) {\r\n        case 'parsleyForm':\r\n          parsleyInstance = $.extend(\r\n            new ParsleyForm(this.$element, this.domOptions, this.options),\r\n            window.ParsleyExtend\r\n          )._bindFields();\r\n          break;\r\n        case 'parsleyField':\r\n          parsleyInstance = $.extend(\r\n            new ParsleyField(this.$element, this.domOptions, this.options, this.parent),\r\n            window.ParsleyExtend\r\n          );\r\n          break;\r\n        case 'parsleyFieldMultiple':\r\n          parsleyInstance = $.extend(\r\n            new ParsleyField(this.$element, this.domOptions, this.options, this.parent),\r\n            new ParsleyMultiple(),\r\n            window.ParsleyExtend\r\n          )._init();\r\n          break;\r\n        default:\r\n          throw new Error(type + 'is not a supported Parsley type');\r\n      }\r\n      if (this.options.multiple)\r\n        ParsleyUtils.setAttr(this.$element, this.options.namespace, 'multiple', this.options.multiple);\r\n      if ('undefined' !== typeof doNotStore) {\r\n        this.$element.data('ParsleyFieldMultiple', parsleyInstance);\r\n        return parsleyInstance;\r\n      }\r\n       // Store the freshly bound instance in a DOM element for later access using jQuery `data()`\r\n      this.$element.data('Parsley', parsleyInstance);\r\n      // Tell the world we have a new ParsleyForm or ParsleyField instance!\r\n      parsleyInstance._trigger('init');\r\n      return parsleyInstance;\r\n    }\r\n  };\r\n\r\n  var\r\n    o = $({}),\r\n    deprecated = function () {\r\n      ParsleyUtils.warnOnce(\"Parsley's pubsub module is deprecated; use the 'on' and 'off' methods on parsley instances or window.Parsley\");\r\n    };\r\n  // Returns an event handler that calls `fn` with the arguments it expects\r\n  function adapt(fn, context) {\r\n    // Store to allow unbinding\r\n    if (!fn.parsleyAdaptedCallback) {\r\n      fn.parsleyAdaptedCallback = function () {\r\n        var args = Array.prototype.slice.call(arguments, 0);\r\n        args.unshift(this);\r\n        fn.apply(context || o, args);\r\n      };\r\n    }\r\n    return fn.parsleyAdaptedCallback;\r\n  }\r\n  var eventPrefix = 'parsley:';\r\n  // Converts 'parsley:form:validate' into 'form:validate'\r\n  function eventName(name) {\r\n    if (name.lastIndexOf(eventPrefix, 0) === 0)\r\n      return name.substr(eventPrefix.length);\r\n    return name;\r\n  }\r\n  // $.listen is deprecated. Use Parsley.on instead.\r\n  $.listen = function (name, callback) {\r\n    var context;\r\n    deprecated();\r\n    if ('object' === typeof arguments[1] && 'function' === typeof arguments[2]) {\r\n      context = arguments[1];\r\n      callback = arguments[2];\r\n    }\r\n    if ('function' !== typeof arguments[1])\r\n      throw new Error('Wrong parameters');\r\n    window.Parsley.on(eventName(name), adapt(callback, context));\r\n  };\r\n  $.listenTo = function (instance, name, fn) {\r\n    deprecated();\r\n    if (!(instance instanceof ParsleyField) && !(instance instanceof ParsleyForm))\r\n      throw new Error('Must give Parsley instance');\r\n    if ('string' !== typeof name || 'function' !== typeof fn)\r\n      throw new Error('Wrong parameters');\r\n    instance.on(eventName(name), adapt(fn));\r\n  };\r\n  $.unsubscribe = function (name, fn) {\r\n    deprecated();\r\n    if ('string' !== typeof name || 'function' !== typeof fn)\r\n      throw new Error('Wrong arguments');\r\n    window.Parsley.off(eventName(name), fn.parsleyAdaptedCallback);\r\n  };\r\n  $.unsubscribeTo = function (instance, name) {\r\n    deprecated();\r\n    if (!(instance instanceof ParsleyField) && !(instance instanceof ParsleyForm))\r\n      throw new Error('Must give Parsley instance');\r\n    instance.off(eventName(name));\r\n  };\r\n  $.unsubscribeAll = function (name) {\r\n    deprecated();\r\n    window.Parsley.off(eventName(name));\r\n    $('form,input,textarea,select').each(function() {\r\n      var instance = $(this).data('Parsley');\r\n      if (instance) {\r\n        instance.off(eventName(name));\r\n      }\r\n    });\r\n  };\r\n  // $.emit is deprecated. Use jQuery events instead.\r\n  $.emit = function (name, instance) {\r\n    deprecated();\r\n    var instanceGiven = (instance instanceof ParsleyField) || (instance instanceof ParsleyForm);\r\n    var args = Array.prototype.slice.call(arguments, instanceGiven ? 2 : 1);\r\n    args.unshift(eventName(name));\r\n    if (!instanceGiven) {\r\n      instance = window.Parsley;\r\n    }\r\n    instance.trigger.apply(instance, args);\r\n  };\r\n\r\n// ParsleyConfig definition if not already set\r\nwindow.ParsleyConfig = window.ParsleyConfig || {};\r\nwindow.ParsleyConfig.i18n = window.ParsleyConfig.i18n || {};\r\n// Define then the messages\r\nwindow.ParsleyConfig.i18n.en = jQuery.extend(window.ParsleyConfig.i18n.en || {}, {\r\n  defaultMessage: \"This value seems to be invalid.\",\r\n  type: {\r\n    email:        \"This value should be a valid email.\",\r\n    url:          \"This value should be a valid url.\",\r\n    number:       \"This value should be a valid number.\",\r\n    integer:      \"This value should be a valid integer.\",\r\n    digits:       \"This value should be digits.\",\r\n    alphanum:     \"This value should be alphanumeric.\"\r\n  },\r\n  notblank:       \"This value should not be blank.\",\r\n  required:       \"This value is required.\",\r\n  pattern:        \"This value seems to be invalid.\",\r\n  min:            \"This value should be greater than or equal to %s.\",\r\n  max:            \"This value should be lower than or equal to %s.\",\r\n  range:          \"This value should be between %s and %s.\",\r\n  minlength:      \"This value is too short. It should have %s characters or more.\",\r\n  maxlength:      \"This value is too long. It should have %s characters or fewer.\",\r\n  length:         \"This value length is invalid. It should be between %s and %s characters long.\",\r\n  mincheck:       \"You must select at least %s choices.\",\r\n  maxcheck:       \"You must select %s choices or fewer.\",\r\n  check:          \"You must select between %s and %s choices.\",\r\n  equalto:        \"This value should be the same.\"\r\n});\r\n// If file is loaded after Parsley main file, auto-load locale\r\nif ('undefined' !== typeof window.ParsleyValidator)\r\n  window.ParsleyValidator.addCatalog('en', window.ParsleyConfig.i18n.en, true);\r\n\r\n//     Parsley.js 2.1.3\r\n//     http://parsleyjs.org\r\n//     (c) 2012-2015 Guillaume Potier, Wisembly\r\n//     Parsley may be freely distributed under the MIT license.\r\n\r\n  // Inherit `on`, `off` & `trigger` to Parsley:\r\n  var Parsley = $.extend(new ParsleyAbstract(), {\r\n      $element: $(document),\r\n      actualizeOptions: null,\r\n      _resetOptions: null,\r\n      Factory: ParsleyFactory,\r\n      version: '2.1.3'\r\n    });\r\n  // Supplement ParsleyField and Form with ParsleyAbstract\r\n  // This way, the constructors will have access to those methods\r\n  $.extend(ParsleyField.prototype, ParsleyAbstract.prototype);\r\n  $.extend(ParsleyForm.prototype, ParsleyAbstract.prototype);\r\n  // Inherit actualizeOptions and _resetOptions:\r\n  $.extend(ParsleyFactory.prototype, ParsleyAbstract.prototype);\r\n  // ### jQuery API\r\n  // `$('.elem').parsley(options)` or `$('.elem').psly(options)`\r\n  $.fn.parsley = $.fn.psly = function (options) {\r\n    if (this.length > 1) {\r\n      var instances = [];\r\n      this.each(function () {\r\n        instances.push($(this).parsley(options));\r\n      });\r\n      return instances;\r\n    }\r\n    // Return undefined if applied to non existing DOM element\r\n    if (!$(this).length) {\r\n      ParsleyUtils.warn('You must bind Parsley on an existing element.');\r\n      return;\r\n    }\r\n    return new ParsleyFactory(this, options);\r\n  };\r\n  // ### ParsleyField and ParsleyForm extension\r\n  // Ensure the extension is now defined if it wasn't previously\r\n  if ('undefined' === typeof window.ParsleyExtend)\r\n    window.ParsleyExtend = {};\r\n  // ### Parsley config\r\n  // Inherit from ParsleyDefault, and copy over any existing values\r\n  Parsley.options = $.extend(ParsleyUtils.objectCreate(ParsleyDefaults), window.ParsleyConfig);\r\n  window.ParsleyConfig = Parsley.options; // Old way of accessing global options\r\n  // ### Globals\r\n  window.Parsley = window.psly = Parsley;\r\n  window.ParsleyUtils = ParsleyUtils;\r\n  window.ParsleyValidator = new ParsleyValidator(window.ParsleyConfig.validators, window.ParsleyConfig.i18n);\r\n  // ### ParsleyUI\r\n  // UI is a separate class that only listens to some events and then modifies the DOM accordingly\r\n  // Could be overriden by defining a `window.ParsleyConfig.ParsleyUI` appropriate class (with `listen()` method basically)\r\n  window.ParsleyUI = 'function' === typeof window.ParsleyConfig.ParsleyUI ?\r\n    new window.ParsleyConfig.ParsleyUI().listen() : new ParsleyUI().listen();\r\n  // ### PARSLEY auto-binding\r\n  // Prevent it by setting `ParsleyConfig.autoBind` to `false`\r\n  if (false !== window.ParsleyConfig.autoBind)\r\n    $(function () {\r\n      // Works only on `data-parsley-validate`.\r\n      if ($('[data-parsley-validate]').length)\r\n        $('[data-parsley-validate]').parsley();\r\n    });\r\n\treturn window.Parsley;\r\n}));\r\n\r\n// `window.ParsleyExtend`, like `ParsleyAbstract`, is inherited by `ParsleyField` and `ParsleyForm`\r\n// That way, we could add new methods or redefine some for these both classes. In particular case\r\n// We are adding async validation methods that returns promises, bind them properly to triggered\r\n// Events like onkeyup when field is invalid or on form submit. These validation methods adds an\r\n// Extra `remote` validator which could not be simply added like other `ParsleyExtra` validators\r\n// Because returns promises instead of booleans.\r\n(function($){\r\n\r\nwindow.ParsleyExtend = window.ParsleyExtend || {};\r\nwindow.ParsleyExtend = $.extend(true, window.ParsleyExtend, {\r\n  asyncSupport: true,\r\n\r\n  asyncValidators: {\r\n    'default': {\r\n      fn: function (xhr) {\r\n        return 'resolved' === xhr.state();\r\n      },\r\n      url: false\r\n    },\r\n    reverse: {\r\n      fn: function (xhr) {\r\n        // If reverse option is set, a failing ajax request is considered successful\r\n        return 'rejected' === xhr.state();\r\n      },\r\n      url: false\r\n    }\r\n  },\r\n\r\n  addAsyncValidator: function (name, fn, url, options) {\r\n    this.asyncValidators[name.toLowerCase()] = {\r\n      fn: fn,\r\n      url: url || false,\r\n      options: options || {}\r\n    };\r\n\r\n    return this;\r\n  },\r\n\r\n  asyncValidate: function () {\r\n    if ('ParsleyForm' === this.__class__)\r\n      return this._asyncValidateForm.apply(this, arguments);\r\n\r\n    return this._asyncValidateField.apply(this, arguments);\r\n  },\r\n\r\n  asyncIsValid: function () {\r\n    if ('ParsleyField' === this.__class__)\r\n      return this._asyncIsValidField.apply(this, arguments);\r\n\r\n    return this._asyncIsValidForm.apply(this, arguments);\r\n  },\r\n\r\n  onSubmitValidate: function (event) {\r\n    var that = this;\r\n\r\n    // This is a Parsley generated submit event, do not validate, do not prevent, simply exit and keep normal behavior\r\n    if (true === event.parsley)\r\n      return;\r\n\r\n    // Clone the event object\r\n    this.submitEvent = $.extend(true, {}, event);\r\n\r\n    // Prevent form submit and immediately stop its event propagation\r\n    if (event instanceof $.Event) {\r\n      event.stopImmediatePropagation();\r\n      event.preventDefault();\r\n    }\r\n\r\n    return this._asyncValidateForm(undefined, event)\r\n      .done(function () {\r\n        // If user do not have prevented the event, re-submit form\r\n        if (that._trigger('submit') && !that.submitEvent.isDefaultPrevented())\r\n          that.$element.trigger($.extend($.Event('submit'), { parsley: true }));\r\n      });\r\n  },\r\n\r\n  eventValidate: function (event) {\r\n    // For keyup, keypress, keydown.. events that could be a little bit obstrusive\r\n    // do not validate if val length < min threshold on first validation. Once field have been validated once and info\r\n    // about success or failure have been displayed, always validate with this trigger to reflect every yalidation change.\r\n    if (new RegExp('key').test(event.type))\r\n      if (!this._ui.validationInformationVisible && this.getValue().length <= this.options.validationThreshold)\r\n        return;\r\n\r\n    this._ui.validatedOnce = true;\r\n    this.asyncValidate();\r\n  },\r\n\r\n  // Returns Promise\r\n  _asyncValidateForm: function (group, event) {\r\n    var\r\n      that = this,\r\n      promises = [];\r\n\r\n    this._refreshFields();\r\n\r\n    this._trigger('validate');\r\n\r\n    for (var i = 0; i < this.fields.length; i++) {\r\n\r\n      // do not validate a field if not the same as given validation group\r\n      if (group && group !== this.fields[i].options.group)\r\n        continue;\r\n\r\n      promises.push(this.fields[i]._asyncValidateField());\r\n    }\r\n\r\n    return $.when.apply($, promises)\r\n      .done(function () {\r\n        that._trigger('success');\r\n      })\r\n      .fail(function () {\r\n        that._trigger('error');\r\n      })\r\n      .always(function () {\r\n        that._trigger('validated');\r\n      });\r\n  },\r\n\r\n  _asyncIsValidForm: function (group, force) {\r\n    var promises = [];\r\n    this._refreshFields();\r\n\r\n    for (var i = 0; i < this.fields.length; i++) {\r\n\r\n      // do not validate a field if not the same as given validation group\r\n      if (group && group !== this.fields[i].options.group)\r\n        continue;\r\n\r\n      promises.push(this.fields[i]._asyncIsValidField(force));\r\n    }\r\n\r\n    return $.when.apply($, promises);\r\n  },\r\n\r\n  _asyncValidateField: function (force) {\r\n    var that = this;\r\n\r\n    this._trigger('validate');\r\n\r\n    return this._asyncIsValidField(force)\r\n      .done(function () {\r\n        that._trigger('success');\r\n      })\r\n      .fail(function () {\r\n        that._trigger('error');\r\n      })\r\n      .always(function () {\r\n        that._trigger('validated');\r\n      });\r\n  },\r\n\r\n  _asyncIsValidField: function (force, value) {\r\n    var\r\n      deferred = $.Deferred(),\r\n      remoteConstraintIndex;\r\n\r\n    // If regular isValid (matching regular constraints) returns `false`, no need to go further\r\n    // Directly reject promise, do not run remote validator and save server load\r\n    if (false === this.isValid(force, value))\r\n      deferred.rejectWith(this);\r\n\r\n    // If regular constraints are valid, and there is a remote validator registered, run it\r\n    else if ('undefined' !== typeof this.constraintsByName.remote)\r\n      this._remote(deferred);\r\n\r\n    // Otherwise all is good, resolve promise\r\n    else\r\n      deferred.resolveWith(this);\r\n\r\n    // Return promise\r\n    return deferred.promise();\r\n  },\r\n\r\n  _remote: function (deferred) {\r\n    var\r\n      that = this,\r\n      data = {},\r\n      ajaxOptions,\r\n      csr,\r\n      validator = this.options.remoteValidator || (true === this.options.remoteReverse ? 'reverse' : 'default');\r\n\r\n    validator = validator.toLowerCase();\r\n\r\n    if ('undefined' === typeof this.asyncValidators[validator])\r\n      throw new Error('Calling an undefined async validator: `' + validator + '`');\r\n\r\n    // Fill data with current value\r\n    data[this.$element.attr('name') || this.$element.attr('id')] = this.getValue();\r\n\r\n    // Merge options passed in from the function with the ones in the attribute\r\n    this.options.remoteOptions = $.extend(true, this.options.remoteOptions || {} , this.asyncValidators[validator].options);\r\n\r\n    // All `$.ajax(options)` could be overridden or extended directly from DOM in `data-parsley-remote-options`\r\n    ajaxOptions = $.extend(true, {}, {\r\n      url: this.asyncValidators[validator].url || this.options.remote,\r\n      data: data,\r\n      type: 'GET'\r\n    }, this.options.remoteOptions || {});\r\n\r\n    // Generate store key based on ajax options\r\n    csr = $.param(ajaxOptions);\r\n\r\n    // Initialise querry cache\r\n    if ('undefined' === typeof this._remoteCache)\r\n      this._remoteCache = {};\r\n\r\n    // Try to retrieve stored xhr\r\n    if (!this._remoteCache[csr]) {\r\n      // Prevent multi burst xhr queries\r\n      if (this._xhr && 'pending' === this._xhr.state())\r\n        this._xhr.abort();\r\n\r\n      // Make ajax call\r\n      this._xhr = $.ajax(ajaxOptions);\r\n\r\n      // Store remote call result to avoid next calls with exact same parameters\r\n      this._remoteCache[csr] = this._xhr;\r\n    }\r\n\r\n    this._remoteCache[csr]\r\n      .done(function (data, textStatus, xhr) {\r\n        that._handleRemoteResult(validator, xhr, deferred);\r\n      })\r\n      .fail(function (xhr, status, message) {\r\n        // If we aborted the query, do not handle nothing for this value\r\n        if ('abort' === status)\r\n          return;\r\n\r\n        that._handleRemoteResult(validator, xhr, deferred);\r\n      });\r\n  },\r\n\r\n  _handleRemoteResult: function (validator, xhr, deferred) {\r\n    // If true, simply resolve and exit\r\n    if ('function' === typeof this.asyncValidators[validator].fn && this.asyncValidators[validator].fn.call(this, xhr)) {\r\n      deferred.resolveWith(this);\r\n\r\n      return;\r\n    }\r\n\r\n    // Else, create a proper remote validation Violation to trigger right UI\r\n    this.validationResult = [\r\n      new window.ParsleyValidator.Validator.Violation(\r\n        this.constraintsByName.remote,\r\n        this.getValue(),\r\n        null\r\n      )\r\n    ];\r\n\r\n    deferred.rejectWith(this);\r\n  }\r\n});\r\n\r\n// Remote validator is just an always true sync validator with lowest (-1) priority possible\r\n// It will be overloaded in `validateThroughValidator()` that will do the heavy async work\r\n// This 'hack' is needed not to mess up too much with error messages and stuff in `ParsleyUI`\r\nwindow.ParsleyConfig = window.ParsleyConfig || {};\r\nwindow.ParsleyConfig.validators = window.ParsleyConfig.validators || {};\r\nwindow.ParsleyConfig.validators.remote = {\r\n  fn: function () {\r\n    return true;\r\n  },\r\n  priority: -1\r\n};\r\n\r\nwindow.Parsley.on('form:submit', function () {\r\n  this._remoteCache = {};\r\n});\r\n\r\n})(jQuery);\r\n"]}