{"version":3,"sources":["../../../../../server/app/libs/jquery/jquery-pjax/jquery.pjax.js"],"names":["$","fnPjax","selector","container","options","context","on","event","opts","extend","optionsFor","attr","handleClick","link","currentTarget","tagName","toUpperCase","which","metaKey","ctrlKey","shiftKey","altKey","location","protocol","hostname","href","indexOf","stripHash","isDefaultPrevented","defaults","url","target","clickEvent","Event","trigger","pjax","preventDefault","handleSubmit","form","type","method","action","window","FormData","undefined","data","processData","contentType","find","length","serializeArray","ajaxSettings","isFunction","hash","parseURL","findContainerFor","isArray","push","name","value","_pjax","fire","args","props","relatedTarget","timeoutTimer","beforeSend","xhr","settings","timeout","setRequestHeader","setTimeout","abort","requestUrl","stripInternalParams","complete","textStatus","clearTimeout","error","errorThrown","extractContainer","allowed","locationReplace","success","status","previousState","state","currentVersion","version","latestVersion","getResponseHeader","contents","id","uniqueId","title","fragment","replace","history","replaceState","document","activeElement","blur","e","html","autofocusEl","last","focus","executeScriptTags","scripts","scrollTo","decodeURIComponent","slice","getElementById","getElementsByName","offset","top","scrollTop","abortXHR","ajax","readyState","cachePush","cloneContents","pushState","pjaxReload","initialPop","initialURL","initialState","onPjaxPopstate","direction","cache","cacheMapping","cachePop","popstateEvent","beforeReplaceEvent","offsetHeight","fallbackPjax","style","append","toLowerCase","each","split","index","pair","key","body","submit","onreadystatechange","noop","Date","getTime","cloned","clone","src","jQuery","_data","search","a","createElement","isPlainObject","findAll","elems","filter","add","parseHTML","obj","fullDocument","test","serverUrl","$head","match","$body","text","$fragment","first","not","is","remove","trim","existingScripts","matchedScripts","script","head","appendChild","cacheForwardStack","cacheBackStack","trimCacheStack","maxCacheLength","pushStack","popStack","pop","stack","shift","findVersion","enable","fn","disable","click","reload","dataType","off","inArray","support","navigator","userAgent"],"mappings":"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","file":"jquery.pjax.js","sourcesContent":["/*!\r\n * Copyright 2012, Chris Wanstrath\r\n * Released under the MIT License\r\n * https://github.com/defunkt/jquery-pjax\r\n */\r\n\r\n(function($){\r\n\r\n// When called on a container with a selector, fetches the href with\r\n// ajax into the container or with the data-pjax attribute on the link\r\n// itself.\r\n//\r\n// Tries to make sure the back button and ctrl+click work the way\r\n// you'd expect.\r\n//\r\n// Exported as $.fn.pjax\r\n//\r\n// Accepts a jQuery ajax options object that may include these\r\n// pjax specific options:\r\n//\r\n//\r\n// container - Where to stick the response body. Usually a String selector.\r\n//             $(container).html(xhr.responseBody)\r\n//             (default: current jquery context)\r\n//      push - Whether to pushState the URL. Defaults to true (of course).\r\n//   replace - Want to use replaceState instead? That's cool.\r\n//\r\n// For convenience the second parameter can be either the container or\r\n// the options object.\r\n//\r\n// Returns the jQuery object\r\nfunction fnPjax(selector, container, options) {\r\n  var context = this\r\n  return this.on('click.pjax', selector, function(event) {\r\n    var opts = $.extend({}, optionsFor(container, options))\r\n    if (!opts.container)\r\n      opts.container = $(this).attr('data-pjax') || context\r\n    handleClick(event, opts)\r\n  })\r\n}\r\n\r\n// Public: pjax on click handler\r\n//\r\n// Exported as $.pjax.click.\r\n//\r\n// event   - \"click\" jQuery.Event\r\n// options - pjax options\r\n//\r\n// Examples\r\n//\r\n//   $(document).on('click', 'a', $.pjax.click)\r\n//   // is the same as\r\n//   $(document).pjax('a')\r\n//\r\n//  $(document).on('click', 'a', function(event) {\r\n//    var container = $(this).closest('[data-pjax-container]')\r\n//    $.pjax.click(event, container)\r\n//  })\r\n//\r\n// Returns nothing.\r\nfunction handleClick(event, container, options) {\r\n  options = optionsFor(container, options)\r\n\r\n  var link = event.currentTarget\r\n\r\n  if (link.tagName.toUpperCase() !== 'A')\r\n    throw \"$.fn.pjax or $.pjax.click requires an anchor element\"\r\n\r\n  // Middle click, cmd click, and ctrl click should open\r\n  // links in a new tab as normal.\r\n  if ( event.which > 1 || event.metaKey || event.ctrlKey || event.shiftKey || event.altKey )\r\n    return\r\n\r\n  // Ignore cross origin links\r\n  if ( location.protocol !== link.protocol || location.hostname !== link.hostname )\r\n    return\r\n\r\n  // Ignore case when a hash is being tacked on the current URL\r\n  if ( link.href.indexOf('#') > -1 && stripHash(link) == stripHash(location) )\r\n    return\r\n\r\n  // Ignore event with default prevented\r\n  if (event.isDefaultPrevented())\r\n    return\r\n\r\n  var defaults = {\r\n    url: link.href,\r\n    container: $(link).attr('data-pjax'),\r\n    target: link\r\n  }\r\n\r\n  var opts = $.extend({}, defaults, options)\r\n  var clickEvent = $.Event('pjax:click')\r\n  $(link).trigger(clickEvent, [opts])\r\n\r\n  if (!clickEvent.isDefaultPrevented()) {\r\n    pjax(opts)\r\n    event.preventDefault()\r\n    $(link).trigger('pjax:clicked', [opts])\r\n  }\r\n}\r\n\r\n// Public: pjax on form submit handler\r\n//\r\n// Exported as $.pjax.submit\r\n//\r\n// event   - \"click\" jQuery.Event\r\n// options - pjax options\r\n//\r\n// Examples\r\n//\r\n//  $(document).on('submit', 'form', function(event) {\r\n//    var container = $(this).closest('[data-pjax-container]')\r\n//    $.pjax.submit(event, container)\r\n//  })\r\n//\r\n// Returns nothing.\r\nfunction handleSubmit(event, container, options) {\r\n  options = optionsFor(container, options)\r\n\r\n  var form = event.currentTarget\r\n\r\n  if (form.tagName.toUpperCase() !== 'FORM')\r\n    throw \"$.pjax.submit requires a form element\"\r\n\r\n  var defaults = {\r\n    type: form.method.toUpperCase(),\r\n    url: form.action,\r\n    container: $(form).attr('data-pjax'),\r\n    target: form\r\n  }\r\n\r\n  if (defaults.type !== 'GET' && window.FormData !== undefined) {\r\n    defaults.data = new FormData(form);\r\n    defaults.processData = false;\r\n    defaults.contentType = false;\r\n  } else {\r\n    // Can't handle file uploads, exit\r\n    if ($(form).find(':file').length) {\r\n      return;\r\n    }\r\n\r\n    // Fallback to manually serializing the fields\r\n    defaults.data = $(form).serializeArray();\r\n  }\r\n\r\n  pjax($.extend({}, defaults, options))\r\n\r\n  event.preventDefault()\r\n}\r\n\r\n// Loads a URL with ajax, puts the response body inside a container,\r\n// then pushState()'s the loaded URL.\r\n//\r\n// Works just like $.ajax in that it accepts a jQuery ajax\r\n// settings object (with keys like url, type, data, etc).\r\n//\r\n// Accepts these extra keys:\r\n//\r\n// container - Where to stick the response body.\r\n//             $(container).html(xhr.responseBody)\r\n//      push - Whether to pushState the URL. Defaults to true (of course).\r\n//   replace - Want to use replaceState instead? That's cool.\r\n//\r\n// Use it just like $.ajax:\r\n//\r\n//   var xhr = $.pjax({ url: this.href, container: '#main' })\r\n//   console.log( xhr.readyState )\r\n//\r\n// Returns whatever $.ajax returns.\r\nfunction pjax(options) {\r\n  options = $.extend(true, {}, $.ajaxSettings, pjax.defaults, options)\r\n\r\n  if ($.isFunction(options.url)) {\r\n    options.url = options.url()\r\n  }\r\n\r\n  var target = options.target\r\n\r\n  var hash = parseURL(options.url).hash\r\n\r\n  var context = options.context = findContainerFor(options.container)\r\n\r\n  // We want the browser to maintain two separate internal caches: one\r\n  // for pjax'd partial page loads and one for normal page loads.\r\n  // Without adding this secret parameter, some browsers will often\r\n  // confuse the two.\r\n  if (!options.data) options.data = {}\r\n  if ($.isArray(options.data)) {\r\n    options.data.push({name: '_pjax', value: context.selector})\r\n  } else {\r\n    options.data._pjax = context.selector\r\n  }\r\n\r\n  function fire(type, args, props) {\r\n    if (!props) props = {}\r\n    props.relatedTarget = target\r\n    var event = $.Event(type, props)\r\n    context.trigger(event, args)\r\n    return !event.isDefaultPrevented()\r\n  }\r\n\r\n  var timeoutTimer\r\n\r\n  options.beforeSend = function(xhr, settings) {\r\n    // No timeout for non-GET requests\r\n    // Its not safe to request the resource again with a fallback method.\r\n    if (settings.type !== 'GET') {\r\n      settings.timeout = 0\r\n    }\r\n\r\n    xhr.setRequestHeader('X-PJAX', 'true')\r\n    xhr.setRequestHeader('X-PJAX-Container', context.selector)\r\n\r\n    if (!fire('pjax:beforeSend', [xhr, settings]))\r\n      return false\r\n\r\n    if (settings.timeout > 0) {\r\n      timeoutTimer = setTimeout(function() {\r\n        if (fire('pjax:timeout', [xhr, options]))\r\n          xhr.abort('timeout')\r\n      }, settings.timeout)\r\n\r\n      // Clear timeout setting so jquerys internal timeout isn't invoked\r\n      settings.timeout = 0\r\n    }\r\n\r\n    var url = parseURL(settings.url)\r\n    if (hash) url.hash = hash\r\n    options.requestUrl = stripInternalParams(url)\r\n  }\r\n\r\n  options.complete = function(xhr, textStatus) {\r\n    if (timeoutTimer)\r\n      clearTimeout(timeoutTimer)\r\n\r\n    fire('pjax:complete', [xhr, textStatus, options])\r\n\r\n    fire('pjax:end', [xhr, options])\r\n  }\r\n\r\n  options.error = function(xhr, textStatus, errorThrown) {\r\n    var container = extractContainer(\"\", xhr, options)\r\n\r\n    var allowed = fire('pjax:error', [xhr, textStatus, errorThrown, options])\r\n    if (options.type == 'GET' && textStatus !== 'abort' && allowed) {\r\n      locationReplace(container.url)\r\n    }\r\n  }\r\n\r\n  options.success = function(data, status, xhr) {\r\n    var previousState = pjax.state;\r\n\r\n    // If $.pjax.defaults.version is a function, invoke it first.\r\n    // Otherwise it can be a static string.\r\n    var currentVersion = (typeof $.pjax.defaults.version === 'function') ?\r\n      $.pjax.defaults.version() :\r\n      $.pjax.defaults.version\r\n\r\n    var latestVersion = xhr.getResponseHeader('X-PJAX-Version')\r\n\r\n    var container = extractContainer(data, xhr, options)\r\n\r\n    var url = parseURL(container.url)\r\n    if (hash) {\r\n      url.hash = hash\r\n      container.url = url.href\r\n    }\r\n\r\n    // If there is a layout version mismatch, hard load the new url\r\n    if (currentVersion && latestVersion && currentVersion !== latestVersion) {\r\n      locationReplace(container.url)\r\n      return\r\n    }\r\n\r\n    // If the new response is missing a body, hard load the page\r\n    if (!container.contents) {\r\n      locationReplace(container.url)\r\n      return\r\n    }\r\n\r\n    pjax.state = {\r\n      id: options.id || uniqueId(),\r\n      url: container.url,\r\n      title: container.title,\r\n      container: context.selector,\r\n      fragment: options.fragment,\r\n      timeout: options.timeout\r\n    }\r\n\r\n    if (options.push || options.replace) {\r\n      window.history.replaceState(pjax.state, container.title, container.url)\r\n    }\r\n\r\n    // Clear out any focused controls before inserting new page contents.\r\n    try {\r\n      document.activeElement.blur()\r\n    } catch (e) { }\r\n\r\n    if (container.title) document.title = container.title\r\n\r\n    fire('pjax:beforeReplace', [container.contents, options], {\r\n      state: pjax.state,\r\n      previousState: previousState\r\n    })\r\n    context.html(container.contents)\r\n\r\n    // FF bug: Won't autofocus fields that are inserted via JS.\r\n    // This behavior is incorrect. So if theres no current focus, autofocus\r\n    // the last field.\r\n    //\r\n    // http://www.w3.org/html/wg/drafts/html/master/forms.html\r\n    var autofocusEl = context.find('input[autofocus], textarea[autofocus]').last()[0]\r\n    if (autofocusEl && document.activeElement !== autofocusEl) {\r\n      autofocusEl.focus();\r\n    }\r\n\r\n    executeScriptTags(container.scripts)\r\n\r\n    var scrollTo = options.scrollTo\r\n\r\n    // Ensure browser scrolls to the element referenced by the URL anchor\r\n    if (hash) {\r\n      var name = decodeURIComponent(hash.slice(1))\r\n      var target = document.getElementById(name) || document.getElementsByName(name)[0]\r\n      if (target) scrollTo = $(target).offset().top\r\n    }\r\n\r\n    if (typeof scrollTo == 'number') $(window).scrollTop(scrollTo)\r\n\r\n    fire('pjax:success', [data, status, xhr, options])\r\n  }\r\n\r\n\r\n  // Initialize pjax.state for the initial page load. Assume we're\r\n  // using the container and options of the link we're loading for the\r\n  // back button to the initial page. This ensures good back button\r\n  // behavior.\r\n  if (!pjax.state) {\r\n    pjax.state = {\r\n      id: uniqueId(),\r\n      url: window.location.href,\r\n      title: document.title,\r\n      container: context.selector,\r\n      fragment: options.fragment,\r\n      timeout: options.timeout\r\n    }\r\n    window.history.replaceState(pjax.state, document.title)\r\n  }\r\n\r\n  // Cancel the current request if we're already pjaxing\r\n  abortXHR(pjax.xhr)\r\n\r\n  pjax.options = options\r\n  var xhr = pjax.xhr = $.ajax(options)\r\n\r\n  if (xhr.readyState > 0) {\r\n    if (options.push && !options.replace) {\r\n      // Cache current container element before replacing it\r\n      cachePush(pjax.state.id, cloneContents(context))\r\n\r\n      window.history.pushState(null, \"\", options.requestUrl)\r\n    }\r\n\r\n    fire('pjax:start', [xhr, options])\r\n    fire('pjax:send', [xhr, options])\r\n  }\r\n\r\n  return pjax.xhr\r\n}\r\n\r\n// Public: Reload current page with pjax.\r\n//\r\n// Returns whatever $.pjax returns.\r\nfunction pjaxReload(container, options) {\r\n  var defaults = {\r\n    url: window.location.href,\r\n    push: false,\r\n    replace: true,\r\n    scrollTo: false\r\n  }\r\n\r\n  return pjax($.extend(defaults, optionsFor(container, options)))\r\n}\r\n\r\n// Internal: Hard replace current state with url.\r\n//\r\n// Work for around WebKit\r\n//   https://bugs.webkit.org/show_bug.cgi?id=93506\r\n//\r\n// Returns nothing.\r\nfunction locationReplace(url) {\r\n  window.history.replaceState(null, \"\", pjax.state.url)\r\n  window.location.replace(url)\r\n}\r\n\r\n\r\nvar initialPop = true\r\nvar initialURL = window.location.href\r\nvar initialState = window.history.state\r\n\r\n// Initialize $.pjax.state if possible\r\n// Happens when reloading a page and coming forward from a different\r\n// session history.\r\nif (initialState && initialState.container) {\r\n  pjax.state = initialState\r\n}\r\n\r\n// Non-webkit browsers don't fire an initial popstate event\r\nif ('state' in window.history) {\r\n  initialPop = false\r\n}\r\n\r\n// popstate handler takes care of the back and forward buttons\r\n//\r\n// You probably shouldn't use pjax on pages with other pushState\r\n// stuff yet.\r\nfunction onPjaxPopstate(event) {\r\n\r\n  // Hitting back or forward should override any pending PJAX request.\r\n  if (!initialPop) {\r\n    abortXHR(pjax.xhr)\r\n  }\r\n\r\n  var previousState = pjax.state\r\n  var state = event.state\r\n  var direction\r\n\r\n  if (state && state.container) {\r\n    // When coming forward from a separate history session, will get an\r\n    // initial pop with a state we are already at. Skip reloading the current\r\n    // page.\r\n    if (initialPop && initialURL == state.url) return\r\n\r\n    if (previousState) {\r\n      // If popping back to the same state, just skip.\r\n      // Could be clicking back from hashchange rather than a pushState.\r\n      if (previousState.id === state.id) return\r\n\r\n      // Since state IDs always increase, we can deduce the navigation direction\r\n      direction = previousState.id < state.id ? 'forward' : 'back'\r\n    }\r\n\r\n    var cache = cacheMapping[state.id] || []\r\n    var container = $(cache[0] || state.container), contents = cache[1]\r\n\r\n    if (container.length) {\r\n      if (previousState) {\r\n        // Cache current container before replacement and inform the\r\n        // cache which direction the history shifted.\r\n        cachePop(direction, previousState.id, cloneContents(container))\r\n      }\r\n\r\n      var popstateEvent = $.Event('pjax:popstate', {\r\n        state: state,\r\n        direction: direction\r\n      })\r\n      container.trigger(popstateEvent)\r\n\r\n      var options = {\r\n        id: state.id,\r\n        url: state.url,\r\n        container: container,\r\n        push: false,\r\n        fragment: state.fragment,\r\n        timeout: state.timeout,\r\n        scrollTo: false\r\n      }\r\n\r\n      if (contents) {\r\n        container.trigger('pjax:start', [null, options])\r\n\r\n        pjax.state = state\r\n        if (state.title) document.title = state.title\r\n        var beforeReplaceEvent = $.Event('pjax:beforeReplace', {\r\n          state: state,\r\n          previousState: previousState\r\n        })\r\n        container.trigger(beforeReplaceEvent, [contents, options])\r\n        container.html(contents)\r\n\r\n        container.trigger('pjax:end', [null, options])\r\n      } else {\r\n        pjax(options)\r\n      }\r\n\r\n      // Force reflow/relayout before the browser tries to restore the\r\n      // scroll position.\r\n      container[0].offsetHeight\r\n    } else {\r\n      locationReplace(location.href)\r\n    }\r\n  }\r\n  initialPop = false\r\n}\r\n\r\n// Fallback version of main pjax function for browsers that don't\r\n// support pushState.\r\n//\r\n// Returns nothing since it retriggers a hard form submission.\r\nfunction fallbackPjax(options) {\r\n  var url = $.isFunction(options.url) ? options.url() : options.url,\r\n      method = options.type ? options.type.toUpperCase() : 'GET'\r\n\r\n  var form = $('<form>', {\r\n    method: method === 'GET' ? 'GET' : 'POST',\r\n    action: url,\r\n    style: 'display:none'\r\n  })\r\n\r\n  if (method !== 'GET' && method !== 'POST') {\r\n    form.append($('<input>', {\r\n      type: 'hidden',\r\n      name: '_method',\r\n      value: method.toLowerCase()\r\n    }))\r\n  }\r\n\r\n  var data = options.data\r\n  if (typeof data === 'string') {\r\n    $.each(data.split('&'), function(index, value) {\r\n      var pair = value.split('=')\r\n      form.append($('<input>', {type: 'hidden', name: pair[0], value: pair[1]}))\r\n    })\r\n  } else if ($.isArray(data)) {\r\n    $.each(data, function(index, value) {\r\n      form.append($('<input>', {type: 'hidden', name: value.name, value: value.value}))\r\n    })\r\n  } else if (typeof data === 'object') {\r\n    var key\r\n    for (key in data)\r\n      form.append($('<input>', {type: 'hidden', name: key, value: data[key]}))\r\n  }\r\n\r\n  $(document.body).append(form)\r\n  form.submit()\r\n}\r\n\r\n// Internal: Abort an XmlHttpRequest if it hasn't been completed,\r\n// also removing its event handlers.\r\nfunction abortXHR(xhr) {\r\n  if ( xhr && xhr.readyState < 4) {\r\n    xhr.onreadystatechange = $.noop\r\n    xhr.abort()\r\n  }\r\n}\r\n\r\n// Internal: Generate unique id for state object.\r\n//\r\n// Use a timestamp instead of a counter since ids should still be\r\n// unique across page loads.\r\n//\r\n// Returns Number.\r\nfunction uniqueId() {\r\n  return (new Date).getTime()\r\n}\r\n\r\nfunction cloneContents(container) {\r\n  var cloned = container.clone()\r\n  // Unmark script tags as already being eval'd so they can get executed again\r\n  // when restored from cache. HAXX: Uses jQuery internal method.\r\n  cloned.find('script').each(function(){\r\n    if (!this.src) jQuery._data(this, 'globalEval', false)\r\n  })\r\n  return [container.selector, cloned.contents()]\r\n}\r\n\r\n// Internal: Strip internal query params from parsed URL.\r\n//\r\n// Returns sanitized url.href String.\r\nfunction stripInternalParams(url) {\r\n  url.search = url.search.replace(/([?&])(_pjax|_)=[^&]*/g, '')\r\n  return url.href.replace(/\\?($|#)/, '$1')\r\n}\r\n\r\n// Internal: Parse URL components and returns a Locationish object.\r\n//\r\n// url - String URL\r\n//\r\n// Returns HTMLAnchorElement that acts like Location.\r\nfunction parseURL(url) {\r\n  var a = document.createElement('a')\r\n  a.href = url\r\n  return a\r\n}\r\n\r\n// Internal: Return the `href` component of given URL object with the hash\r\n// portion removed.\r\n//\r\n// location - Location or HTMLAnchorElement\r\n//\r\n// Returns String\r\nfunction stripHash(location) {\r\n  return location.href.replace(/#.*/, '')\r\n}\r\n\r\n// Internal: Build options Object for arguments.\r\n//\r\n// For convenience the first parameter can be either the container or\r\n// the options object.\r\n//\r\n// Examples\r\n//\r\n//   optionsFor('#container')\r\n//   // => {container: '#container'}\r\n//\r\n//   optionsFor('#container', {push: true})\r\n//   // => {container: '#container', push: true}\r\n//\r\n//   optionsFor({container: '#container', push: true})\r\n//   // => {container: '#container', push: true}\r\n//\r\n// Returns options Object.\r\nfunction optionsFor(container, options) {\r\n  // Both container and options\r\n  if ( container && options )\r\n    options.container = container\r\n\r\n  // First argument is options Object\r\n  else if ( $.isPlainObject(container) )\r\n    options = container\r\n\r\n  // Only container\r\n  else\r\n    options = {container: container}\r\n\r\n  // Find and validate container\r\n  if (options.container)\r\n    options.container = findContainerFor(options.container)\r\n\r\n  return options\r\n}\r\n\r\n// Internal: Find container element for a variety of inputs.\r\n//\r\n// Because we can't persist elements using the history API, we must be\r\n// able to find a String selector that will consistently find the Element.\r\n//\r\n// container - A selector String, jQuery object, or DOM Element.\r\n//\r\n// Returns a jQuery object whose context is `document` and has a selector.\r\nfunction findContainerFor(container) {\r\n  container = $(container)\r\n\r\n  if ( !container.length ) {\r\n    throw \"no pjax container for \" + container.selector\r\n  } else if ( container.selector !== '' && container.context === document ) {\r\n    return container\r\n  } else if ( container.attr('id') ) {\r\n    return $('#' + container.attr('id'))\r\n  } else {\r\n    throw \"cant get selector for pjax container!\"\r\n  }\r\n}\r\n\r\n// Internal: Filter and find all elements matching the selector.\r\n//\r\n// Where $.fn.find only matches descendants, findAll will test all the\r\n// top level elements in the jQuery object as well.\r\n//\r\n// elems    - jQuery object of Elements\r\n// selector - String selector to match\r\n//\r\n// Returns a jQuery object.\r\nfunction findAll(elems, selector) {\r\n  return elems.filter(selector).add(elems.find(selector));\r\n}\r\n\r\nfunction parseHTML(html) {\r\n  return $.parseHTML(html, document, true)\r\n}\r\n\r\n// Internal: Extracts container and metadata from response.\r\n//\r\n// 1. Extracts X-PJAX-URL header if set\r\n// 2. Extracts inline <title> tags\r\n// 3. Builds response Element and extracts fragment if set\r\n//\r\n// data    - String response data\r\n// xhr     - XHR response\r\n// options - pjax options Object\r\n//\r\n// Returns an Object with url, title, and contents keys.\r\nfunction extractContainer(data, xhr, options) {\r\n  var obj = {}, fullDocument = /<html/i.test(data)\r\n\r\n  // Prefer X-PJAX-URL header if it was set, otherwise fallback to\r\n  // using the original requested url.\r\n  var serverUrl = xhr.getResponseHeader('X-PJAX-URL')\r\n  obj.url = serverUrl ? stripInternalParams(parseURL(serverUrl)) : options.requestUrl\r\n\r\n  // Attempt to parse response html into elements\r\n  if (fullDocument) {\r\n    var $head = $(parseHTML(data.match(/<head[^>]*>([\\s\\S.]*)<\\/head>/i)[0]))\r\n    var $body = $(parseHTML(data.match(/<body[^>]*>([\\s\\S.]*)<\\/body>/i)[0]))\r\n  } else {\r\n    var $head = $body = $(parseHTML(data))\r\n  }\r\n\r\n  // If response data is empty, return fast\r\n  if ($body.length === 0)\r\n    return obj\r\n\r\n  // If there's a <title> tag in the header, use it as\r\n  // the page's title.\r\n  obj.title = findAll($head, 'title').last().text()\r\n\r\n  if (options.fragment) {\r\n    // If they specified a fragment, look for it in the response\r\n    // and pull it out.\r\n    if (options.fragment === 'body') {\r\n      var $fragment = $body\r\n    } else {\r\n      var $fragment = findAll($body, options.fragment).first()\r\n    }\r\n\r\n    if ($fragment.length) {\r\n      obj.contents = options.fragment === 'body' ? $fragment : $fragment.contents()\r\n\r\n      // If there's no title, look for data-title and title attributes\r\n      // on the fragment\r\n      if (!obj.title)\r\n        obj.title = $fragment.attr('title') || $fragment.data('title')\r\n    }\r\n\r\n  } else if (!fullDocument) {\r\n    obj.contents = $body\r\n  }\r\n\r\n  // Clean up any <title> tags\r\n  if (obj.contents) {\r\n    // Remove any parent title elements\r\n    obj.contents = obj.contents.not(function() { return $(this).is('title') })\r\n\r\n    // Then scrub any titles from their descendants\r\n    obj.contents.find('title').remove()\r\n\r\n    // Gather all script[src] elements\r\n    obj.scripts = findAll(obj.contents, 'script[src]').remove()\r\n    obj.contents = obj.contents.not(obj.scripts)\r\n  }\r\n\r\n  // Trim any whitespace off the title\r\n  if (obj.title) obj.title = $.trim(obj.title)\r\n\r\n  return obj\r\n}\r\n\r\n// Load an execute scripts using standard script request.\r\n//\r\n// Avoids jQuery's traditional $.getScript which does a XHR request and\r\n// globalEval.\r\n//\r\n// scripts - jQuery object of script Elements\r\n//\r\n// Returns nothing.\r\nfunction executeScriptTags(scripts) {\r\n  if (!scripts) return\r\n\r\n  var existingScripts = $('script[src]')\r\n\r\n  scripts.each(function() {\r\n    var src = this.src\r\n    var matchedScripts = existingScripts.filter(function() {\r\n      return this.src === src\r\n    })\r\n    if (matchedScripts.length) return\r\n\r\n    var script = document.createElement('script')\r\n    var type = $(this).attr('type')\r\n    if (type) script.type = type\r\n    script.src = $(this).attr('src')\r\n    document.head.appendChild(script)\r\n  })\r\n}\r\n\r\n// Internal: History DOM caching class.\r\nvar cacheMapping      = {}\r\nvar cacheForwardStack = []\r\nvar cacheBackStack    = []\r\n\r\n// Push previous state id and container contents into the history\r\n// cache. Should be called in conjunction with `pushState` to save the\r\n// previous container contents.\r\n//\r\n// id    - State ID Number\r\n// value - DOM Element to cache\r\n//\r\n// Returns nothing.\r\nfunction cachePush(id, value) {\r\n  cacheMapping[id] = value\r\n  cacheBackStack.push(id)\r\n\r\n  // Remove all entries in forward history stack after pushing a new page.\r\n  trimCacheStack(cacheForwardStack, 0)\r\n\r\n  // Trim back history stack to max cache length.\r\n  trimCacheStack(cacheBackStack, pjax.defaults.maxCacheLength)\r\n}\r\n\r\n// Shifts cache from directional history cache. Should be\r\n// called on `popstate` with the previous state id and container\r\n// contents.\r\n//\r\n// direction - \"forward\" or \"back\" String\r\n// id        - State ID Number\r\n// value     - DOM Element to cache\r\n//\r\n// Returns nothing.\r\nfunction cachePop(direction, id, value) {\r\n  var pushStack, popStack\r\n  cacheMapping[id] = value\r\n\r\n  if (direction === 'forward') {\r\n    pushStack = cacheBackStack\r\n    popStack  = cacheForwardStack\r\n  } else {\r\n    pushStack = cacheForwardStack\r\n    popStack  = cacheBackStack\r\n  }\r\n\r\n  pushStack.push(id)\r\n  if (id = popStack.pop())\r\n    delete cacheMapping[id]\r\n\r\n  // Trim whichever stack we just pushed to to max cache length.\r\n  trimCacheStack(pushStack, pjax.defaults.maxCacheLength)\r\n}\r\n\r\n// Trim a cache stack (either cacheBackStack or cacheForwardStack) to be no\r\n// longer than the specified length, deleting cached DOM elements as necessary.\r\n//\r\n// stack  - Array of state IDs\r\n// length - Maximum length to trim to\r\n//\r\n// Returns nothing.\r\nfunction trimCacheStack(stack, length) {\r\n  while (stack.length > length)\r\n    delete cacheMapping[stack.shift()]\r\n}\r\n\r\n// Public: Find version identifier for the initial page load.\r\n//\r\n// Returns String version or undefined.\r\nfunction findVersion() {\r\n  return $('meta').filter(function() {\r\n    var name = $(this).attr('http-equiv')\r\n    return name && name.toUpperCase() === 'X-PJAX-VERSION'\r\n  }).attr('content')\r\n}\r\n\r\n// Install pjax functions on $.pjax to enable pushState behavior.\r\n//\r\n// Does nothing if already enabled.\r\n//\r\n// Examples\r\n//\r\n//     $.pjax.enable()\r\n//\r\n// Returns nothing.\r\nfunction enable() {\r\n  $.fn.pjax = fnPjax\r\n  $.pjax = pjax\r\n  $.pjax.enable = $.noop\r\n  $.pjax.disable = disable\r\n  $.pjax.click = handleClick\r\n  $.pjax.submit = handleSubmit\r\n  $.pjax.reload = pjaxReload\r\n  $.pjax.defaults = {\r\n    timeout: 650,\r\n    push: true,\r\n    replace: false,\r\n    type: 'GET',\r\n    dataType: 'html',\r\n    scrollTo: 0,\r\n    maxCacheLength: 20,\r\n    version: findVersion\r\n  }\r\n  $(window).on('popstate.pjax', onPjaxPopstate)\r\n}\r\n\r\n// Disable pushState behavior.\r\n//\r\n// This is the case when a browser doesn't support pushState. It is\r\n// sometimes useful to disable pushState for debugging on a modern\r\n// browser.\r\n//\r\n// Examples\r\n//\r\n//     $.pjax.disable()\r\n//\r\n// Returns nothing.\r\nfunction disable() {\r\n  $.fn.pjax = function() { return this }\r\n  $.pjax = fallbackPjax\r\n  $.pjax.enable = enable\r\n  $.pjax.disable = $.noop\r\n  $.pjax.click = $.noop\r\n  $.pjax.submit = $.noop\r\n  $.pjax.reload = function() { window.location.reload() }\r\n\r\n  $(window).off('popstate.pjax', onPjaxPopstate)\r\n}\r\n\r\n\r\n// Add the state property to jQuery's event object so we can use it in\r\n// $(window).bind('popstate')\r\nif ( $.inArray('state', $.event.props) < 0 )\r\n  $.event.props.push('state')\r\n\r\n// Is pjax supported by this browser?\r\n$.support.pjax =\r\n  window.history && window.history.pushState && window.history.replaceState &&\r\n  // pushState isn't reliable on iOS until 5.\r\n  !navigator.userAgent.match(/((iPod|iPhone|iPad).+\\bOS\\s+[1-4]\\D|WebApps\\/.+CFNetwork)/)\r\n\r\n$.support.pjax ? enable() : disable()\r\n\r\n})(jQuery);\r\n"]}