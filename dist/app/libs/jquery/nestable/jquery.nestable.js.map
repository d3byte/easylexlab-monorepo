{"version":3,"sources":["../../../../../server/app/libs/jquery/nestable/jquery.nestable.js"],"names":["$","window","document","undefined","hasTouch","hasPointerEvents","el","createElement","docEl","documentElement","style","pointerEvents","appendChild","supports","getComputedStyle","removeChild","defaults","listNodeName","itemNodeName","rootClass","listClass","itemClass","dragClass","handleClass","collapsedClass","placeClass","noDragClass","emptyClass","expandBtnHTML","collapseBtnHTML","group","maxDepth","threshold","Plugin","element","options","w","extend","init","prototype","list","reset","data","placeEl","each","find","k","setParent","on","e","dragEl","target","currentTarget","action","item","parent","collapseItem","expandItem","onStartEvent","handle","hasClass","closest","length","isTouch","test","type","touches","preventDefault","dragStart","onMoveEvent","dragMove","onEndEvent","dragStop","addEventListener","serialize","depth","step","level","array","items","children","li","sub","push","first","serialise","mouse","offsetX","offsetY","startX","startY","lastX","lastY","nowX","nowY","distX","distY","dirAx","dirX","dirY","lastDirX","lastDirY","distAxX","distAxY","moving","dragRootEl","dragDepth","hasNewRoot","pointEl","removeClass","hide","show","lists","addClass","expandAll","collapseAll","prepend","unsetParent","remove","dragItem","css","height","pageX","offset","left","pageY","top","width","after","parentNode","appendTo","body","append","i","parents","replaceWith","trigger","prev","next","opt","newAx","Math","abs","last","isEmpty","visibility","elementFromPoint","scrollLeft","pageYOffset","scrollTop","pointElRoot","isNewRoot","before","fn","nestable","params","retval","plugin","Date","getTime","jQuery","Zepto"],"mappings":"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","file":"jquery.nestable.js","sourcesContent":["/*!\r\n * Nestable jQuery Plugin - Copyright (c) 2012 David Bushell - http://dbushell.com/\r\n * Dual-licensed under the BSD or MIT licenses\r\n */\r\n;(function($, window, document, undefined)\r\n{\r\n    var hasTouch = 'ontouchstart' in document;\r\n\r\n    /**\r\n     * Detect CSS pointer-events property\r\n     * events are normally disabled on the dragging element to avoid conflicts\r\n     * https://github.com/ausi/Feature-detection-technique-for-pointer-events/blob/master/modernizr-pointerevents.js\r\n     */\r\n    var hasPointerEvents = (function()\r\n    {\r\n        var el    = document.createElement('div'),\r\n            docEl = document.documentElement;\r\n        if (!('pointerEvents' in el.style)) {\r\n            return false;\r\n        }\r\n        el.style.pointerEvents = 'auto';\r\n        el.style.pointerEvents = 'x';\r\n        docEl.appendChild(el);\r\n        var supports = window.getComputedStyle && window.getComputedStyle(el, '').pointerEvents === 'auto';\r\n        docEl.removeChild(el);\r\n        return !!supports;\r\n    })();\r\n\r\n    var defaults = {\r\n            listNodeName    : 'ol',\r\n            itemNodeName    : 'li',\r\n            rootClass       : 'dd',\r\n            listClass       : 'dd-list',\r\n            itemClass       : 'dd-item',\r\n            dragClass       : 'dd-dragel',\r\n            handleClass     : 'dd-handle',\r\n            collapsedClass  : 'dd-collapsed',\r\n            placeClass      : 'dd-placeholder',\r\n            noDragClass     : 'dd-nodrag',\r\n            emptyClass      : 'dd-empty',\r\n            expandBtnHTML   : '<button data-action=\"expand\" type=\"button\">Expand</button>',\r\n            collapseBtnHTML : '<button data-action=\"collapse\" type=\"button\">Collapse</button>',\r\n            group           : 0,\r\n            maxDepth        : 5,\r\n            threshold       : 20\r\n        };\r\n\r\n    function Plugin(element, options)\r\n    {\r\n        this.w  = $(document);\r\n        this.el = $(element);\r\n        this.options = $.extend({}, defaults, options);\r\n        this.init();\r\n    }\r\n\r\n    Plugin.prototype = {\r\n\r\n        init: function()\r\n        {\r\n            var list = this;\r\n\r\n            list.reset();\r\n\r\n            list.el.data('nestable-group', this.options.group);\r\n\r\n            list.placeEl = $('<div class=\"' + list.options.placeClass + '\"/>');\r\n\r\n            $.each(this.el.find(list.options.itemNodeName), function(k, el) {\r\n                list.setParent($(el));\r\n            });\r\n\r\n            list.el.on('click', 'button', function(e) {\r\n                if (list.dragEl) {\r\n                    return;\r\n                }\r\n                var target = $(e.currentTarget),\r\n                    action = target.data('action'),\r\n                    item   = target.parent(list.options.itemNodeName);\r\n                if (action === 'collapse') {\r\n                    list.collapseItem(item);\r\n                }\r\n                if (action === 'expand') {\r\n                    list.expandItem(item);\r\n                }\r\n            });\r\n\r\n            var onStartEvent = function(e)\r\n            {\r\n                var handle = $(e.target);\r\n                if (!handle.hasClass(list.options.handleClass)) {\r\n                    if (handle.closest('.' + list.options.noDragClass).length) {\r\n                        return;\r\n                    }\r\n                    handle = handle.closest('.' + list.options.handleClass);\r\n                }\r\n\r\n                if (!handle.length || list.dragEl) {\r\n                    return;\r\n                }\r\n\r\n                list.isTouch = /^touch/.test(e.type);\r\n                if (list.isTouch && e.touches.length !== 1) {\r\n                    return;\r\n                }\r\n\r\n                e.preventDefault();\r\n                list.dragStart(e.touches ? e.touches[0] : e);\r\n            };\r\n\r\n            var onMoveEvent = function(e)\r\n            {\r\n                if (list.dragEl) {\r\n                    e.preventDefault();\r\n                    list.dragMove(e.touches ? e.touches[0] : e);\r\n                }\r\n            };\r\n\r\n            var onEndEvent = function(e)\r\n            {\r\n                if (list.dragEl) {\r\n                    e.preventDefault();\r\n                    list.dragStop(e.touches ? e.touches[0] : e);\r\n                }\r\n            };\r\n\r\n            if (hasTouch) {\r\n                list.el[0].addEventListener('touchstart', onStartEvent, false);\r\n                window.addEventListener('touchmove', onMoveEvent, false);\r\n                window.addEventListener('touchend', onEndEvent, false);\r\n                window.addEventListener('touchcancel', onEndEvent, false);\r\n            }\r\n\r\n            list.el.on('mousedown', onStartEvent);\r\n            list.w.on('mousemove', onMoveEvent);\r\n            list.w.on('mouseup', onEndEvent);\r\n\r\n        },\r\n\r\n        serialize: function()\r\n        {\r\n            var data,\r\n                depth = 0,\r\n                list  = this;\r\n                step  = function(level, depth)\r\n                {\r\n                    var array = [ ],\r\n                        items = level.children(list.options.itemNodeName);\r\n                    items.each(function()\r\n                    {\r\n                        var li   = $(this),\r\n                            item = $.extend({}, li.data()),\r\n                            sub  = li.children(list.options.listNodeName);\r\n                        if (sub.length) {\r\n                            item.children = step(sub, depth + 1);\r\n                        }\r\n                        array.push(item);\r\n                    });\r\n                    return array;\r\n                };\r\n            data = step(list.el.find(list.options.listNodeName).first(), depth);\r\n            return data;\r\n        },\r\n\r\n        serialise: function()\r\n        {\r\n            return this.serialize();\r\n        },\r\n\r\n        reset: function()\r\n        {\r\n            this.mouse = {\r\n                offsetX   : 0,\r\n                offsetY   : 0,\r\n                startX    : 0,\r\n                startY    : 0,\r\n                lastX     : 0,\r\n                lastY     : 0,\r\n                nowX      : 0,\r\n                nowY      : 0,\r\n                distX     : 0,\r\n                distY     : 0,\r\n                dirAx     : 0,\r\n                dirX      : 0,\r\n                dirY      : 0,\r\n                lastDirX  : 0,\r\n                lastDirY  : 0,\r\n                distAxX   : 0,\r\n                distAxY   : 0\r\n            };\r\n            this.isTouch    = false;\r\n            this.moving     = false;\r\n            this.dragEl     = null;\r\n            this.dragRootEl = null;\r\n            this.dragDepth  = 0;\r\n            this.hasNewRoot = false;\r\n            this.pointEl    = null;\r\n        },\r\n\r\n        expandItem: function(li)\r\n        {\r\n            li.removeClass(this.options.collapsedClass);\r\n            li.children('[data-action=\"expand\"]').hide();\r\n            li.children('[data-action=\"collapse\"]').show();\r\n            li.children(this.options.listNodeName).show();\r\n        },\r\n\r\n        collapseItem: function(li)\r\n        {\r\n            var lists = li.children(this.options.listNodeName);\r\n            if (lists.length) {\r\n                li.addClass(this.options.collapsedClass);\r\n                li.children('[data-action=\"collapse\"]').hide();\r\n                li.children('[data-action=\"expand\"]').show();\r\n                li.children(this.options.listNodeName).hide();\r\n            }\r\n        },\r\n\r\n        expandAll: function()\r\n        {\r\n            var list = this;\r\n            list.el.find(list.options.itemNodeName).each(function() {\r\n                list.expandItem($(this));\r\n            });\r\n        },\r\n\r\n        collapseAll: function()\r\n        {\r\n            var list = this;\r\n            list.el.find(list.options.itemNodeName).each(function() {\r\n                list.collapseItem($(this));\r\n            });\r\n        },\r\n\r\n        setParent: function(li)\r\n        {\r\n            if (li.children(this.options.listNodeName).length) {\r\n                li.prepend($(this.options.expandBtnHTML));\r\n                li.prepend($(this.options.collapseBtnHTML));\r\n            }\r\n            li.children('[data-action=\"expand\"]').hide();\r\n        },\r\n\r\n        unsetParent: function(li)\r\n        {\r\n            li.removeClass(this.options.collapsedClass);\r\n            li.children('[data-action]').remove();\r\n            li.children(this.options.listNodeName).remove();\r\n        },\r\n\r\n        dragStart: function(e)\r\n        {\r\n            var mouse    = this.mouse,\r\n                target   = $(e.target),\r\n                dragItem = target.closest(this.options.itemNodeName);\r\n\r\n            this.placeEl.css('height', dragItem.height());\r\n\r\n            mouse.offsetX = e.offsetX !== undefined ? e.offsetX : e.pageX - target.offset().left;\r\n            mouse.offsetY = e.offsetY !== undefined ? e.offsetY : e.pageY - target.offset().top;\r\n            mouse.startX = mouse.lastX = e.pageX;\r\n            mouse.startY = mouse.lastY = e.pageY;\r\n\r\n            this.dragRootEl = this.el;\r\n\r\n            this.dragEl = $(document.createElement(this.options.listNodeName)).addClass(this.options.listClass + ' ' + this.options.dragClass);\r\n            this.dragEl.css('width', dragItem.width());\r\n\r\n            dragItem.after(this.placeEl);\r\n            dragItem[0].parentNode.removeChild(dragItem[0]);\r\n            dragItem.appendTo(this.dragEl);\r\n\r\n            $(document.body).append(this.dragEl);\r\n            this.dragEl.css({\r\n                'left' : e.pageX - mouse.offsetX,\r\n                'top'  : e.pageY - mouse.offsetY\r\n            });\r\n            // total depth of dragging item\r\n            var i, depth,\r\n                items = this.dragEl.find(this.options.itemNodeName);\r\n            for (i = 0; i < items.length; i++) {\r\n                depth = $(items[i]).parents(this.options.listNodeName).length;\r\n                if (depth > this.dragDepth) {\r\n                    this.dragDepth = depth;\r\n                }\r\n            }\r\n        },\r\n\r\n        dragStop: function(e)\r\n        {\r\n            var el = this.dragEl.children(this.options.itemNodeName).first();\r\n            el[0].parentNode.removeChild(el[0]);\r\n            this.placeEl.replaceWith(el);\r\n\r\n            this.dragEl.remove();\r\n            this.el.trigger('change');\r\n            if (this.hasNewRoot) {\r\n                this.dragRootEl.trigger('change');\r\n            }\r\n            this.reset();\r\n        },\r\n\r\n        dragMove: function(e)\r\n        {\r\n            var list, parent, prev, next, depth,\r\n                opt   = this.options,\r\n                mouse = this.mouse;\r\n\r\n            this.dragEl.css({\r\n                'left' : e.pageX - mouse.offsetX,\r\n                'top'  : e.pageY - mouse.offsetY\r\n            });\r\n\r\n            // mouse position last events\r\n            mouse.lastX = mouse.nowX;\r\n            mouse.lastY = mouse.nowY;\r\n            // mouse position this events\r\n            mouse.nowX  = e.pageX;\r\n            mouse.nowY  = e.pageY;\r\n            // distance mouse moved between events\r\n            mouse.distX = mouse.nowX - mouse.lastX;\r\n            mouse.distY = mouse.nowY - mouse.lastY;\r\n            // direction mouse was moving\r\n            mouse.lastDirX = mouse.dirX;\r\n            mouse.lastDirY = mouse.dirY;\r\n            // direction mouse is now moving (on both axis)\r\n            mouse.dirX = mouse.distX === 0 ? 0 : mouse.distX > 0 ? 1 : -1;\r\n            mouse.dirY = mouse.distY === 0 ? 0 : mouse.distY > 0 ? 1 : -1;\r\n            // axis mouse is now moving on\r\n            var newAx   = Math.abs(mouse.distX) > Math.abs(mouse.distY) ? 1 : 0;\r\n\r\n            // do nothing on first move\r\n            if (!mouse.moving) {\r\n                mouse.dirAx  = newAx;\r\n                mouse.moving = true;\r\n                return;\r\n            }\r\n\r\n            // calc distance moved on this axis (and direction)\r\n            if (mouse.dirAx !== newAx) {\r\n                mouse.distAxX = 0;\r\n                mouse.distAxY = 0;\r\n            } else {\r\n                mouse.distAxX += Math.abs(mouse.distX);\r\n                if (mouse.dirX !== 0 && mouse.dirX !== mouse.lastDirX) {\r\n                    mouse.distAxX = 0;\r\n                }\r\n                mouse.distAxY += Math.abs(mouse.distY);\r\n                if (mouse.dirY !== 0 && mouse.dirY !== mouse.lastDirY) {\r\n                    mouse.distAxY = 0;\r\n                }\r\n            }\r\n            mouse.dirAx = newAx;\r\n\r\n            /**\r\n             * move horizontal\r\n             */\r\n            if (mouse.dirAx && mouse.distAxX >= opt.threshold) {\r\n                // reset move distance on x-axis for new phase\r\n                mouse.distAxX = 0;\r\n                prev = this.placeEl.prev(opt.itemNodeName);\r\n                // increase horizontal level if previous sibling exists and is not collapsed\r\n                if (mouse.distX > 0 && prev.length && !prev.hasClass(opt.collapsedClass)) {\r\n                    // cannot increase level when item above is collapsed\r\n                    list = prev.find(opt.listNodeName).last();\r\n                    // check if depth limit has reached\r\n                    depth = this.placeEl.parents(opt.listNodeName).length;\r\n                    if (depth + this.dragDepth <= opt.maxDepth) {\r\n                        // create new sub-level if one doesn't exist\r\n                        if (!list.length) {\r\n                            list = $('<' + opt.listNodeName + '/>').addClass(opt.listClass);\r\n                            list.append(this.placeEl);\r\n                            prev.append(list);\r\n                            this.setParent(prev);\r\n                        } else {\r\n                            // else append to next level up\r\n                            list = prev.children(opt.listNodeName).last();\r\n                            list.append(this.placeEl);\r\n                        }\r\n                    }\r\n                }\r\n                // decrease horizontal level\r\n                if (mouse.distX < 0) {\r\n                    // we can't decrease a level if an item preceeds the current one\r\n                    next = this.placeEl.next(opt.itemNodeName);\r\n                    if (!next.length) {\r\n                        parent = this.placeEl.parent();\r\n                        this.placeEl.closest(opt.itemNodeName).after(this.placeEl);\r\n                        if (!parent.children().length) {\r\n                            this.unsetParent(parent.parent());\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n\r\n            var isEmpty = false;\r\n\r\n            // find list item under cursor\r\n            if (!hasPointerEvents) {\r\n                this.dragEl[0].style.visibility = 'hidden';\r\n            }\r\n            this.pointEl = $(document.elementFromPoint(e.pageX - document.body.scrollLeft, e.pageY - (window.pageYOffset || document.documentElement.scrollTop)));\r\n            if (!hasPointerEvents) {\r\n                this.dragEl[0].style.visibility = 'visible';\r\n            }\r\n            if (this.pointEl.hasClass(opt.handleClass)) {\r\n                this.pointEl = this.pointEl.parent(opt.itemNodeName);\r\n            }\r\n            if (this.pointEl.hasClass(opt.emptyClass)) {\r\n                isEmpty = true;\r\n            }\r\n            else if (!this.pointEl.length || !this.pointEl.hasClass(opt.itemClass)) {\r\n                return;\r\n            }\r\n\r\n            // find parent list of item under cursor\r\n            var pointElRoot = this.pointEl.closest('.' + opt.rootClass),\r\n                isNewRoot   = this.dragRootEl.data('nestable-id') !== pointElRoot.data('nestable-id');\r\n\r\n            /**\r\n             * move vertical\r\n             */\r\n            if (!mouse.dirAx || isNewRoot || isEmpty) {\r\n                // check if groups match if dragging over new root\r\n                if (isNewRoot && opt.group !== pointElRoot.data('nestable-group')) {\r\n                    return;\r\n                }\r\n                // check depth limit\r\n                depth = this.dragDepth - 1 + this.pointEl.parents(opt.listNodeName).length;\r\n                if (depth > opt.maxDepth) {\r\n                    return;\r\n                }\r\n                var before = e.pageY < (this.pointEl.offset().top + this.pointEl.height() / 2);\r\n                    parent = this.placeEl.parent();\r\n                // if empty create new list to replace empty placeholder\r\n                if (isEmpty) {\r\n                    list = $(document.createElement(opt.listNodeName)).addClass(opt.listClass);\r\n                    list.append(this.placeEl);\r\n                    this.pointEl.replaceWith(list);\r\n                }\r\n                else if (before) {\r\n                    this.pointEl.before(this.placeEl);\r\n                }\r\n                else {\r\n                    this.pointEl.after(this.placeEl);\r\n                }\r\n                if (!parent.children().length) {\r\n                    this.unsetParent(parent.parent());\r\n                }\r\n                if (!this.dragRootEl.find(opt.itemNodeName).length) {\r\n                    this.dragRootEl.append('<div class=\"' + opt.emptyClass + '\"/>');\r\n                }\r\n                // parent root list has changed\r\n                if (isNewRoot) {\r\n                    this.dragRootEl = pointElRoot;\r\n                    this.hasNewRoot = this.el[0] !== this.dragRootEl[0];\r\n                }\r\n            }\r\n        }\r\n\r\n    };\r\n\r\n    $.fn.nestable = function(params)\r\n    {\r\n        var lists  = this,\r\n            retval = this;\r\n\r\n        lists.each(function()\r\n        {\r\n            var plugin = $(this).data(\"nestable\");\r\n\r\n            if (!plugin) {\r\n                $(this).data(\"nestable\", new Plugin(this, params));\r\n                $(this).data(\"nestable-id\", new Date().getTime());\r\n            } else {\r\n                if (typeof params === 'string' && typeof plugin[params] === 'function') {\r\n                    retval = plugin[params]();\r\n                }\r\n            }\r\n        });\r\n\r\n        return retval || lists;\r\n    };\r\n\r\n})(window.jQuery || window.Zepto, window, document);\r\n"]}