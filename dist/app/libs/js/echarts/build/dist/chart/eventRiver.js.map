{"version":3,"sources":["../../../../../../../../server/app/libs/js/echarts/build/dist/chart/eventRiver.js"],"names":["define","e","t","n","a","o","i","call","r","_ondragend","isDragend","refresh","eventRiver","zlevel","z","clickable","legendHoverLink","itemStyle","normal","borderColor","borderWidth","label","show","position","formatter","emphasis","s","l","h","prototype","type","CHART_TYPE_EVENTRIVER","_buildShape","series","selectedMap","_dataPreprocessing","component","legend","length","reformOption","name","isSelected","buildMark","push","_intervalX","grid","getArea","_drawEventRiver","addShapeList","xAxis","getAxis","xAxisIndex","data","evolution","timeScale","getCoord","getNewDate","time","valueScale","Math","pow","value","round","getWidth","_drawEventBubble","m","V","U","getColor","zr","d","deepMerge","p","c","getItemStyleColor","color","u","lift","y","_calculateControlPoints","g","deepQuery","style","pointList","smooth","brushType","lineJoin","lineWidth","strokeColor","highlightStyle","draggable","ondragend","addLabel","pack","shapeList","target","dragOut","dragIn","needRefresh","option","backupShapeList","inherits","importance","weight","sort","Number","MAX_VALUE","min","max","slice","b","f","k","_","ypx","_offset","height","xpx","Error"],"mappings":"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","file":"eventRiver.js","sourcesContent":["define(\"echarts/chart/eventRiver\",[\"require\",\"./base\",\"../layout/eventRiver\",\"zrender/shape/Polygon\",\"../component/axis\",\"../component/grid\",\"../component/dataZoom\",\"../config\",\"../util/ecData\",\"../util/date\",\"zrender/tool/util\",\"zrender/tool/color\",\"../chart\"],function(e){function t(e,t,n,a,o){i.call(this,e,t,n,a,o);var r=this;r._ondragend=function(){r.isDragend=!0},this.refresh(a)}var i=e(\"./base\"),n=e(\"../layout/eventRiver\"),a=e(\"zrender/shape/Polygon\");e(\"../component/axis\"),e(\"../component/grid\"),e(\"../component/dataZoom\");var o=e(\"../config\");o.eventRiver={zlevel:0,z:2,clickable:!0,legendHoverLink:!0,itemStyle:{normal:{borderColor:\"rgba(0,0,0,0)\",borderWidth:1,label:{show:!0,position:\"inside\",formatter:\"{b}\"}},emphasis:{borderColor:\"rgba(0,0,0,0)\",borderWidth:1,label:{show:!0}}}};var r=e(\"../util/ecData\"),s=e(\"../util/date\"),l=e(\"zrender/tool/util\"),h=e(\"zrender/tool/color\");return t.prototype={type:o.CHART_TYPE_EVENTRIVER,_buildShape:function(){var e=this.series;this.selectedMap={},this._dataPreprocessing();for(var t=this.component.legend,i=[],a=0;a<e.length;a++)if(e[a].type===this.type){e[a]=this.reformOption(e[a]),this.legendHoverLink=e[a].legendHoverLink||this.legendHoverLink;var o=e[a].name||\"\";if(this.selectedMap[o]=t?t.isSelected(o):!0,!this.selectedMap[o])continue;this.buildMark(a),i.push(this.series[a])}n(i,this._intervalX,this.component.grid.getArea()),this._drawEventRiver(),this.addShapeList()},_dataPreprocessing:function(){for(var e,t,i=this.series,n=0,a=i.length;a>n;n++)if(i[n].type===this.type){e=this.component.xAxis.getAxis(i[n].xAxisIndex||0);for(var o=0,r=i[n].data.length;r>o;o++){t=i[n].data[o].evolution;for(var l=0,h=t.length;h>l;l++)t[l].timeScale=e.getCoord(s.getNewDate(t[l].time)-0),t[l].valueScale=Math.pow(t[l].value,.8)}}this._intervalX=Math.round(this.component.grid.getWidth()/40)},_drawEventRiver:function(){for(var e=this.series,t=0;t<e.length;t++){var i=e[t].name||\"\";if(e[t].type===this.type&&this.selectedMap[i])for(var n=0;n<e[t].data.length;n++)this._drawEventBubble(e[t].data[n],t,n)}},_drawEventBubble:function(e,t,i){var n=this.series,o=n[t],s=o.name||\"\",l=o.data[i],m=[l,o],V=this.component.legend,U=V?V.getColor(s):this.zr.getColor(t),d=this.deepMerge(m,\"itemStyle.normal\")||{},p=this.deepMerge(m,\"itemStyle.emphasis\")||{},c=this.getItemStyleColor(d.color,t,i,l)||U,u=this.getItemStyleColor(p.color,t,i,l)||(\"string\"==typeof c?h.lift(c,-.2):c),y=this._calculateControlPoints(e),g={zlevel:o.zlevel,z:o.z,clickable:this.deepQuery(m,\"clickable\"),style:{pointList:y,smooth:\"spline\",brushType:\"both\",lineJoin:\"round\",color:c,lineWidth:d.borderWidth,strokeColor:d.borderColor},highlightStyle:{color:u,lineWidth:p.borderWidth,strokeColor:p.borderColor},draggable:\"vertical\",ondragend:this._ondragend};g=new a(g),this.addLabel(g,o,l,e.name),r.pack(g,n[t],t,n[t].data[i],i,n[t].data[i].name),this.shapeList.push(g)},_calculateControlPoints:function(e){var t=this._intervalX,i=e.y,n=e.evolution,a=n.length;if(!(1>a)){for(var o=[],r=[],s=0;a>s;s++)o.push(n[s].timeScale),r.push(n[s].valueScale);var l=[];l.push([o[0],i]);var s=0;for(s=0;a-1>s;s++)l.push([(o[s]+o[s+1])/2,r[s]/-2+i]);for(l.push([(o[s]+(o[s]+t))/2,r[s]/-2+i]),l.push([o[s]+t,i]),l.push([(o[s]+(o[s]+t))/2,r[s]/2+i]),s=a-1;s>0;s--)l.push([(o[s]+o[s-1])/2,r[s-1]/2+i]);return l}},ondragend:function(e,t){this.isDragend&&e.target&&(t.dragOut=!0,t.dragIn=!0,t.needRefresh=!1,this.isDragend=!1)},refresh:function(e){e&&(this.option=e,this.series=e.series),this.backupShapeList(),this._buildShape()}},l.inherits(t,i),e(\"../chart\").define(\"eventRiver\",t),t}),define(\"echarts/layout/eventRiver\",[\"require\"],function(){function e(e,i,o){function r(e,t){var i=e.importance,n=t.importance;return i>n?-1:n>i?1:0}for(var s=4,l=0;l<e.length;l++){for(var h=0;h<e[l].data.length;h++){null==e[l].data[h].weight&&(e[l].data[h].weight=1);for(var m=0,V=0;V<e[l].data[h].evolution.length;V++)m+=e[l].data[h].evolution[V].valueScale;e[l].data[h].importance=m*e[l].data[h].weight}e[l].data.sort(r)}for(var l=0;l<e.length;l++){null==e[l].weight&&(e[l].weight=1);for(var m=0,h=0;h<e[l].data.length;h++)m+=e[l].data[h].weight;e[l].importance=m*e[l].weight}e.sort(r);for(var U=Number.MAX_VALUE,d=0,l=0;l<e.length;l++)for(var h=0;h<e[l].data.length;h++)for(var V=0;V<e[l].data[h].evolution.length;V++){var p=e[l].data[h].evolution[V].timeScale;U=Math.min(U,p),d=Math.max(d,p)}U=~~U,d=~~d;for(var c=function(){var e=d-U+1+~~i;if(0>=e)return[0];for(var t=[];e--;)t.push(0);return t}(),u=c.slice(0),y=[],g=0,b=0,l=0;l<e.length;l++)for(var h=0;h<e[l].data.length;h++){var f=e[l].data[h];f.time=[],f.value=[];for(var k,_=0,V=0;V<e[l].data[h].evolution.length;V++)k=e[l].data[h].evolution[V],f.time.push(k.timeScale),f.value.push(k.valueScale),_=Math.max(_,k.valueScale);n(f,i,U),f.y=a(u,f,function(e,t){return e.ypx[t]}),f._offset=a(c,f,function(){return s}),g=Math.max(g,f.y+_),b=Math.max(b,f._offset),y.push(f)}t(y,o,g,b)}function t(e,t,i,n){for(var a=t.height,o=n/a>.5?.5:1,r=t.y,s=(t.height-n)/i,l=0,h=e.length;h>l;l++){var m=e[l];m.y=r+s*m.y+m._offset*o,delete m.time,delete m.value,delete m.xpx,delete m.ypx,delete m._offset;for(var V=m.evolution,U=0,d=V.length;d>U;U++)V[U].valueScale*=s}}function i(e,t,i,n){if(e===i)throw new Error(\"x0 is equal with x1!!!\");if(t===n)return function(){return t};var a=(t-n)/(e-i),o=(n*e-t*i)/(e-i);return function(e){return a*e+o}}function n(e,t,n){var a=~~t,o=e.time.length;e.xpx=[],e.ypx=[];for(var r,s=0,l=0,h=0,m=0,V=0;o>s;s++){l=~~e.time[s],m=e.value[s]/2,s===o-1?(h=l+a,V=0):(h=~~e.time[s+1],V=e.value[s+1]/2),r=i(l,m,h,V);for(var U=l;h>U;U++)e.xpx.push(U-n),e.ypx.push(r(U))}e.xpx.push(h-n),e.ypx.push(V)}function a(e,t,i){for(var n,a=0,o=t.xpx.length,r=0;o>r;r++)n=i(t,r),a=Math.max(a,n+e[t.xpx[r]]);for(r=0;o>r;r++)n=i(t,r),e[t.xpx[r]]=a+n;return a}return e});"]}